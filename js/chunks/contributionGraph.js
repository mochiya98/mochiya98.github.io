(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(t,i){!function(){"use strict";var t={};function i(i,n){var r;t[i]=!0,void 0!==n&&(r=n,window.console&&window.console.error&&window.console.error(r))}var n=function t(i){var n=i.t;this.i=i,this.s=!0,this.h=!1,this.o=null,this.u=new Array(i.v);for(var r=0;r<this.u.length;r++){var s=new t.l(n);this.u[r]=s}this.m=0};(n.l=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=t.FLOAT,this.M=!1,this._=16,this.offset=0,this.g="",this.p()}).prototype.p=function(){this.g=[this.size,this.type,this.M,this._,this.offset].join(":")};var r=function(i){var n=this;this.t=i,function(i){var n=i.getError;i.getError=function(){do{(r=n.apply(i))!=i.NO_ERROR&&(t[r]=!0)}while(r!=i.NO_ERROR);for(var r in t)if(t[r])return delete t[r],parseInt(r);return i.NO_ERROR}}(i);var r=this.A={getParameter:i.getParameter,enableVertexAttribArray:i.enableVertexAttribArray,disableVertexAttribArray:i.disableVertexAttribArray,bindBuffer:i.bindBuffer,getVertexAttrib:i.getVertexAttrib,vertexAttribPointer:i.vertexAttribPointer};i.getParameter=function(t){return t==n.VERTEX_ARRAY_BINDING_OES?n.O==n.j?null:n.O:r.getParameter.apply(this,arguments)},i.enableVertexAttribArray=function(t){var i=n.O;i.m=Math.max(i.m,t);var s=i.u[t];return s.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},i.disableVertexAttribArray=function(t){var i=n.O;i.m=Math.max(i.m,t);var s=i.u[t];return s.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},i.bindBuffer=function(t,s){switch(t){case i.ARRAY_BUFFER:n.S=s;break;case i.ELEMENT_ARRAY_BUFFER:n.O.o=s}return r.bindBuffer.apply(this,arguments)},i.getVertexAttrib=function(t,s){var h=n.O,e=h.u[t];switch(s){case i.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return e.buffer;case i.VERTEX_ATTRIB_ARRAY_ENABLED:return e.enabled;case i.VERTEX_ATTRIB_ARRAY_SIZE:return e.size;case i.VERTEX_ATTRIB_ARRAY_STRIDE:return e._;case i.VERTEX_ATTRIB_ARRAY_TYPE:return e.type;case i.VERTEX_ATTRIB_ARRAY_NORMALIZED:return e.M;default:return r.getVertexAttrib.apply(this,arguments)}},i.vertexAttribPointer=function(t,i,s,h,e,o){var a=n.O;a.m=Math.max(a.m,t);var u=a.u[t];return u.buffer=n.S,u.size=i,u.type=s,u.M=h,u._=e,u.offset=o,u.p(),r.vertexAttribPointer.apply(this,arguments)},i.F&&i.F(this,"OES_vertex_array_object"),i.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",window.console&&window.console.log&&window.console.log(t),n.V()}),!0),this.V()};r.prototype.VERTEX_ARRAY_BINDING_OES=34229,r.prototype.V=function(){if(void 0!==this.N)for(var t=0;t<this.N.length;++t)this.N.s=!1;var i=this.t;this.v=i.getParameter(i.MAX_VERTEX_ATTRIBS),this.j=new n(this),this.O=null,this.S=null,this.N=[this.j],this.bindVertexArrayOES(null)},r.prototype.createVertexArrayOES=function(){var t=new n(this);return this.N.push(t),t},r.prototype.deleteVertexArrayOES=function(t){t.s=!1,this.N.splice(this.N.indexOf(t),1),this.O==t&&this.bindVertexArrayOES(null)},r.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof n&&t.h&&t.i==this)},r.prototype.bindVertexArrayOES=function(t){var n=this.t;if(!t||t.s){var r=this.A,s=this.O;this.O=t||this.j,this.O.h=!0;var h=this.O;if(s!=h){s&&h.o==s.o||r.bindBuffer.call(n,n.ELEMENT_ARRAY_BUFFER,h.o);for(var e=this.S,o=Math.max(s?s.m:0,h.m),a=0;a<=o;a++){var u=h.u[a],v=s?s.u[a]:null;if(s&&u.enabled==v.enabled||(u.enabled?r.enableVertexAttribArray.call(n,a):r.disableVertexAttribArray.call(n,a)),u.enabled){var c=!1;s&&u.buffer==v.buffer||(e!=u.buffer&&(r.bindBuffer.call(n,n.ARRAY_BUFFER,u.buffer),e=u.buffer),c=!0),(c||u.g!=v.g)&&r.vertexAttribPointer.call(n,a,u.size,u.type,u.M,u._,u.offset)}}this.S!=e&&r.bindBuffer.call(n,n.ARRAY_BUFFER,this.S)}}else i(n.INVALID_OPERATION,"bindVertexArrayOES: attempt to bind deleted arrayObject")},"undefined"!=typeof WebGLRenderingContext&&function(){var t=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getSupportedExtensions=function(){var i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};var i=WebGLRenderingContext.prototype.getExtension;WebGLRenderingContext.prototype.getExtension=function(t){var n=i.call(this,t);return n||("OES_vertex_array_object"!==t?null:(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new r(this)),this.__OESVertexArrayObject))}}()}()},function(t,i,n){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])}return i})},,function(t,i,n){"use strict";n.r(i),n.d(i,"draw",(function(){return nt}));n(1),n(2);function r(t){return-(Math.pow(t-1,2)-1)}var s=function(t,i,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(i-t)*n:n<.5?i:n<2/3?t+(i-t)*(2/3-n)*6:t},h=function(t,i,n){var r,h,e;if(t/=360,0==i)r=h=e=n;else{var o=n<.5?n*(1+i):n+i-n*i,a=2*n-o;r=s(a,o,t+1/3),h=s(a,o,t),e=s(a,o,t-1/3)}return[r,h,e]};function e(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t}function o(t,i,n){return t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function a(t,i,n){return t[0]=i[0]-n[0],t[1]=i[1]-n[1],t[2]=i[2]-n[2],t}function u(t,i,n){return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t}function v(t,i){var n=i[0],r=i[1],s=i[2],h=n*n+r*r+s*s;return h>0&&(h=1/Math.sqrt(h)),t[0]=i[0]*h,t[1]=i[1]*h,t[2]=i[2]*h,t}function c(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}var f,d;f=[0,0,0],d=[0,0,0];function l(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.C=r.C||!1,r.G=!0,"value"in r&&(r.X=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(t,i,n){void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=t),this.I=[t,i,n]}var i,n,r,s=t.prototype;return s.set=function(t,i,n){return void 0===i&&(i=t),void 0===n&&(n=t),t.length?this.L(t):(function(t,i,n,r){t[0]=i,t[1]=n,t[2]=r}(this.I,t,i,n),this)},s.L=function(t){return e(this.I,t.I),this},s.add=function(t,i){return i?o(this.I,t.I,i.I):o(this.I,this.I,t.I),this},s.sub=function(t,i){return i?a(this.I,t.I,i.I):a(this.I,this.I,t.I),this},s.multiply=function(t){var i,n,r;return t.length?(i=this.I,n=this.I,r=t,i[0]=n[0]*r[0],i[1]=n[1]*r[1],i[2]=n[2]*r[2]):u(this.I,this.I,t),this},s.R=function(t){var i,n,r;return t.length?(i=this.I,n=this.I,r=t,i[0]=n[0]/r[0],i[1]=n[1]/r[1],i[2]=n[2]/r[2]):u(this.I,this.I,1/t),this},s.Y=function(t){return t?(i=this.I,n=t.I,r=n[0]-i[0],s=n[1]-i[1],h=n[2]-i[2],Math.sqrt(r*r+s*s+h*h)):function(t){var i=t[0],n=t[1],r=t[2];return Math.sqrt(i*i+n*n+r*r)}(this.I);var i,n,r,s,h},s.Z=function(t){return t?(i=this.I,n=t.I,r=n[0]-i[0],s=n[1]-i[1],h=n[2]-i[2],r*r+s*s+h*h):function(t){var i=t[0],n=t[1],r=t[2];return i*i+n*n+r*r}(this.I);var i,n,r,s,h},s.D=function(t){return c(this.I,t.I)},s.U=function(t){var i,n,r,s,h,e,o;return i=this.I,n=this.I,r=t.I,s=n[0],h=n[1],e=n[2],o=(o=r[3]*s+r[7]*h+r[11]*e+r[15])||1,i[0]=(r[0]*s+r[4]*h+r[8]*e+r[12])/o,i[1]=(r[1]*s+r[5]*h+r[9]*e+r[13])/o,i[2]=(r[2]*s+r[6]*h+r[10]*e+r[14])/o,this},s.k=function(t,i){return void 0===i&&(i=0),this.I[0]=t[i],this.I[1]=t[i+1],this.I[2]=t[i+2],this},i=t,(n=[{key:"x",get:function(){return this.I[0]},set:function(t){this.I[0]=t}},{key:"y",get:function(){return this.I[1]},set:function(t){this.I[1]=t}},{key:"z",get:function(){return this.I[2]},set:function(t){this.I[2]=t}}])&&l(i.prototype,n),r&&l(i,r),t}(),m=new w,y=0,p=0,b=function(){function t(t,i){for(var n in void 0===i&&(i={}),this.t=t,this.attributes=i,this.id=y++,this.P={},this.W={start:0,count:0},this.B=0,this.t.q.T(null),this.t.q.$=null,this.H=this.t.q.state,i)this.J(n,i[n])}var i=t.prototype;return i.J=function(t,i){if(this.attributes[t]=i,i.id=p++,i.size=i.size||1,i.type=i.type||(i.data.constructor===Float32Array?this.t.FLOAT:i.data.constructor===Uint16Array?this.t.UNSIGNED_SHORT:this.t.UNSIGNED_INT),i.target="index"===t?this.t.ELEMENT_ARRAY_BUFFER:this.t.ARRAY_BUFFER,i.normalize=i.normalize||!1,i.buffer=this.t.createBuffer(),i.count=i.data.length/i.size,i.divisor=i.K||0,i.tt=!1,this.it(i),i.divisor){if(this.nt=!0,this.B&&this.B!==i.count*i.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.B=Math.min(this.B,i.count*i.divisor);this.B=i.count*i.divisor}else"index"===t?this.W.count=i.count:this.attributes.index||(this.W.count=Math.max(this.W.count,i.count))},i.it=function(t){this.H.rt!==t.id&&(this.t.bindBuffer(t.target,t.buffer),this.H.rt=t.id),this.t.bufferData(t.target,t.data,this.t.STATIC_DRAW),t.tt=!1},i.st=function(t){this.P[t.ht]=this.t.q.et(),this.t.q.T(this.P[t.ht]),this.ot(t)},i.ot=function(t){var i=this;t.at.forEach((function(t,n){if(i.attributes[n]){var r=i.attributes[n];i.t.bindBuffer(r.target,r.buffer),i.H.rt=r.id,i.t.vertexAttribPointer(t,r.size,r.type,r.normalize,0,0),i.t.enableVertexAttribArray(t),i.t.q.ut(t,r.divisor)}else console.warn("active attribute "+n+" not being supplied")})),this.attributes.index&&this.t.bindBuffer(this.t.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)},i.draw=function(t){var i=this,n=t.vt,r=t.mode,s=void 0===r?this.t.TRIANGLES:r;this.t.q.$!==this.id+"_"+n.ht&&(this.P[n.ht]||this.st(n),this.t.q.T(this.P[n.ht]),this.t.q.$=this.id+"_"+n.ht),n.at.forEach((function(t,n){var r=i.attributes[n];r.tt&&i.it(r)})),this.nt?this.attributes.index?this.t.q.ct(s,this.W.count,this.attributes.index.type,this.W.start,this.B):this.t.q.ft(s,this.W.start,this.W.count,this.B):this.attributes.index?this.t.drawElements(s,this.W.count,this.attributes.index.type,this.W.start):this.t.drawArrays(s,this.W.start,this.W.count)},i.dt=function(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||(this.bounds={min:new w,max:new w,lt:new w,scale:new w,wt:1/0});var i=this.bounds.min,n=this.bounds.max,r=this.bounds.lt,s=this.bounds.scale;i.set(1/0),n.set(-1/0);for(var h=0,e=t.length;h<e;h+=3){var o=t[h],a=t[h+1],u=t[h+2];i.x=Math.min(o,i.x),i.y=Math.min(a,i.y),i.z=Math.min(u,i.z),n.x=Math.max(o,n.x),n.y=Math.max(a,n.y),n.z=Math.max(u,n.z)}s.sub(n,i),r.add(i,n).R(2)},i.yt=function(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||this.dt(t);for(var i=0,n=0,r=t.length;n<r;n+=3)m.k(t,n),i=Math.max(i,this.bounds.lt.Z(m));this.bounds.wt=Math.sqrt(i)},i.remove=function(){for(var t in this.pt&&this.t.q.bt(this.pt),this.attributes)this.t.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]},t}(),x=0,M={},_=function(){function t(t,i){var n=void 0===i?{}:i,r=n.xt,s=n.Mt,h=n._t,e=void 0===h?{}:h,o=n.gt,a=void 0!==o&&o,u=n.cullFace,v=void 0===u?t.BACK:u,c=n.frontFace,f=void 0===c?t.CCW:c,d=n.At,l=void 0===d||d,w=n.Ot,m=void 0===w||w,y=n.depthFunc,p=void 0===y?t.LESS:y;this.t=t,this._t=e,this.id=x++,r||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.gt=a,this.cullFace=v,this.frontFace=f,this.At=l,this.Ot=m,this.depthFunc=p,this.blendFunc={},this.blendEquation={},this.gt&&!this.blendFunc.src&&(this.t.q.jt?this.Et(this.t.ONE,this.t.ONE_MINUS_SRC_ALPHA):this.Et(this.t.SRC_ALPHA,this.t.ONE_MINUS_SRC_ALPHA));var b=t.createShader(t.VERTEX_SHADER);t.shaderSource(b,r),t.compileShader(b),""!==t.getShaderInfoLog(b)&&console.warn(t.getShaderInfoLog(b)+"\nVertex Shader\n"+A(r));var M=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(M,s),t.compileShader(M),""!==t.getShaderInfoLog(M)&&console.warn(t.getShaderInfoLog(M)+"\nFragment Shader\n"+A(s)),this.vt=t.createProgram(),t.attachShader(this.vt,b),t.attachShader(this.vt,M),t.linkProgram(this.vt),!t.getProgramParameter(this.vt,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.vt));t.deleteShader(b),t.deleteShader(M),this.St=new Map;for(var _=t.getProgramParameter(this.vt,t.ACTIVE_UNIFORMS),g=0;g<_;g++){var O=t.getActiveUniform(this.vt,g);this.St.set(O,t.getUniformLocation(this.vt,O.name));var j=O.name.match(/(\w+)/g);O.Ft=j[0],3===j.length?(O.zt=!0,O.Vt=Number(j[1]),O.Nt=j[2]):2===j.length&&isNaN(Number(j[1]))&&(O.Ct=!0,O.Nt=j[1])}this.at=new Map;for(var E=[],S=t.getProgramParameter(this.vt,t.ACTIVE_ATTRIBUTES),F=0;F<S;F++){var z=t.getActiveAttrib(this.vt,F),V=t.getAttribLocation(this.vt,z.name);E[V]=z.name,this.at.set(z.name,V)}this.ht=E.join("")}var i=t.prototype;return i.Gt=function(){this.At?this.t.q.enable(this.t.DEPTH_TEST):this.t.q.disable(this.t.DEPTH_TEST),this.cullFace?this.t.q.enable(this.t.CULL_FACE):this.t.q.disable(this.t.CULL_FACE),this.blendFunc.src?this.t.q.enable(this.t.BLEND):this.t.q.disable(this.t.BLEND),this.cullFace&&this.t.q.Xt(this.cullFace),this.t.q.It(this.frontFace),this.t.q.Lt(this.Ot),this.t.q.Rt(this.depthFunc),this.blendFunc.src&&this.t.q.Et(this.blendFunc.src,this.blendFunc.Yt,this.blendFunc.Zt,this.blendFunc.Dt),this.blendEquation.Ut&&this.t.q.kt(this.blendEquation.Ut,this.blendEquation.Pt)},i.Wt=function(t){var i=this,n=(void 0===t?{}:t).Bt,r=void 0!==n&&n,s=-1;this.t.q.Tt===this.id||(this.t.useProgram(this.vt),this.t.q.Tt=this.id),this.St.forEach((function(t,n){var r=n.Ft,h=i._t[r];if(n.Ct&&(h=h[n.Nt],r+="."+n.Nt),n.zt&&(h=h[n.Vt][n.Nt],r+="["+n.Vt+"]."+n.Nt),!h)return j("Active uniform "+r+" has not been supplied");if(h&&void 0===h.value)return j(r+" uniform is missing a value parameter");if(h.value.qt)return s+=1,h.value.update(s),g(i.t,n.type,t,s);if(h.value.I.length&&h.value.I[0].qt){var e=[];return h.value.forEach((function(t){s+=1,t.update(s),e.push(s)})),g(i.t,n.type,t,e)}g(i.t,n.type,t,h.value)})),this.Gt(),r&&this.t.q.It(this.frontFace===this.t.CCW?this.t.CW:this.t.CCW)},i.remove=function(){this.t.deleteProgram(this.vt)},t}();function g(t,i,n,r){var s=r.I.length?function(t){var i=t.length,n=t[0].length;if(void 0===n)return t;var r=i*n,s=M[r];s||(M[r]=s=new Float32Array(r));for(var h=0;h<i;h++)s.set(t[h],h*n);return s}(r.I):r.I,h=t.q.state.St.get(n);if(s.length)if(void 0===h)t.q.state.St.set(n,s.slice(0));else{if(function(t,i){if(t.length!==i.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==i[n])return!1;return!0}(h,s))return;for(var e=s.length;e--;)h[e]=s[e];t.q.state.St.set(n,h)}else{if(h===r)return;t.q.state.St.set(n,r)}switch(i){case 5126:return s.length?t.uniform1fv(n,s):t.uniform1f(n,s);case 35664:return t.uniform2fv(n,s);case 35665:return t.uniform3fv(n,s);case 35666:return t.uniform4fv(n,s);case 35670:case 5124:case 35678:case 35680:return s.length?t.uniform1iv(n,s):t.uniform1i(n,s);case 35671:case 35667:return t.uniform2iv(n,s);case 35672:case 35668:return t.uniform3iv(n,s);case 35673:case 35669:return t.uniform4iv(n,s);case 35674:return t.uniformMatrix2fv(n,!1,s);case 35675:return t.uniformMatrix3fv(n,!1,s);case 35676:return t.uniformMatrix4fv(n,!1,s)}}function A(t){for(var i=t.split("\n"),n=0;n<i.length;n++)i[n]=n+1+": "+i[n];return i.join("\n")}var O=0;function j(t){O>100||(console.warn(t),++O>100&&console.warn("More than 100 program warnings - stopping logs."))}var E=new w,S=function(){function t(t){var i=void 0===t?{}:t,n=i.canvas,r=void 0===n?document.createElement("canvas"):n,s=i.width,h=void 0===s?300:s,e=i.height,o=void 0===e?150:e,a=i.$t,u=void 0===a?1:a,v=i.alpha,c=void 0!==v&&v,f=i.Ht,d=void 0===f||f,l=i.Jt,w=void 0!==l&&l,m=i.Kt,y=void 0!==m&&m,p=i.jt,b=void 0!==p&&p,x=i.Qt,M=void 0!==x&&x,_=i.ti,g=void 0===_?"default":_,A=i.ii,O=void 0===A||A,j=i.ni,E=void 0===j?2:j,S={alpha:c,Ht:d,Jt:w,Kt:y,jt:b,Qt:M,ti:g};this.$t=u,this.alpha=c,this.color=!0,this.Ht=d,this.Jt=w,this.jt=b,this.ii=O,2===E&&(this.t=r.getContext("webgl2",S)),this.ri=!!this.t,this.t||(this.t=r.getContext("webgl",S)||r.getContext("experimental-webgl",S)),this.t.q=this,this.si(h,o),this.hi={},this.hi.ei=this.t.getParameter(this.t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.state={},this.state.blendFunc={src:this.t.ONE,Yt:this.t.ZERO},this.state.blendEquation={Ut:this.t.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.t.CCW,this.state.depthMask=!0,this.state.depthFunc=this.t.LESS,this.state.oi=!1,this.state.flipY=!1,this.state.ai=4,this.state.ui=null,this.state.viewport={width:null,height:null},this.state.vi=[],this.state.ci=0,this.state.rt=null,this.state.St=new Map,this.extensions={},this.ri?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture")),this.ut=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.ft=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.ct=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.et=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.T=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.bt=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES")}var i=t.prototype;return i.si=function(t,i){this.width=t,this.height=i,this.t.canvas.width=t*this.$t,this.t.canvas.height=i*this.$t,this.t.canvas.style.width=t+"px",this.t.canvas.style.height=i+"px"},i.fi=function(t,i){this.state.viewport.width===t&&this.state.viewport.height===i||(this.state.viewport.width=t,this.state.viewport.height=i,this.t.viewport(0,0,t,i))},i.enable=function(t){!0!==this.state[t]&&(this.t.enable(t),this.state[t]=!0)},i.disable=function(t){!1!==this.state[t]&&(this.t.disable(t),this.state[t]=!1)},i.Xt=function(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.t.cullFace(t))},i.It=function(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.t.frontFace(t))},i.Lt=function(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.t.depthMask(t))},i.Rt=function(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.t.depthFunc(t))},i.bindFramebuffer=function(t){var i=void 0===t?{}:t,n=i.target,r=void 0===n?this.t.FRAMEBUFFER:n,s=i.buffer,h=void 0===s?null:s;this.state.ui!==h&&(this.state.ui=h,this.t.bindFramebuffer(r,h))},i.getExtension=function(t,i,n){return i&&this.t[i]?this.t[i].bind(this.t):(this.extensions[t]||(this.extensions[t]=this.t.getExtension(t)),i?this.extensions[t][n].bind(this.extensions[t]):this.extensions[t])},i.di=function(t,i){return t.li!==i.li?t.li-i.li:t.vt.id!==i.vt.id?t.vt.id-i.vt.id:t.wi!==i.wi?t.wi-i.wi:i.id-t.id},i.mi=function(t){var i=t.yi,n=t.pi,r=t.bi,s=t.sort,h=[];if(n&&r&&n.xi(),i.Mi((function(t){if(!t.visible)return!0;t.draw&&(r&&t._i&&n&&!n.gi(t)||h.push(t))})),s){var e=[],o=[],a=[];h.forEach((function(t){t.vt.gt?t.vt.At?o.push(t):a.push(t):e.push(t),t.wi=0,0===t.li&&t.vt.At&&n&&(t.Oi.Ai(E),E.U(n.ji),t.wi=E.z)})),e.sort(this.di),o.sort(this.Ei),a.sort(this.Si),h=e.concat(o,a)}return h},i.Fi=function(t){var i=t.yi,n=t.pi,r=t.target,s=void 0===r?null:r,h=t.update,e=void 0===h||h,o=t.sort,a=void 0===o||o,u=t.bi,v=void 0===u||u,c=t.clear;null===s?(this.bindFramebuffer(),this.fi(this.width*this.$t,this.height*this.$t)):(this.bindFramebuffer(s),this.fi(s.width,s.height)),(c||this.ii&&!1!==c)&&(!this.Ht||s&&s.Ht||(this.enable(this.t.DEPTH_TEST),this.Lt(!0)),this.t.clear((this.color?this.t.COLOR_BUFFER_BIT:0)|(this.Ht?this.t.DEPTH_BUFFER_BIT:0)|(this.Jt?this.t.STENCIL_BUFFER_BIT:0))),e&&i.zi(),n&&null===n.parent&&n.zi(),this.mi({yi:i,pi:n,bi:v,sort:a}).forEach((function(t){t.draw({pi:n})}))},t}();var F,z=function(t,i){var n=i[0],r=i[1],s=i[2],h=i[3],e=n*n+r*r+s*s+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=n*e,t[1]=r*e,t[2]=s*e,t[3]=h*e,t},V=(F=[1,0,0,0,1,0,0,0,1],function(){function t(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),this.I=[t,i,n,r],this.Vi=function(){}}return t.prototype.Ni=function(t){return function(t,i,n){void 0===n&&(n="YXZ");var r=Math.sin(.5*i[0]),s=Math.cos(.5*i[0]),h=Math.sin(.5*i[1]),e=Math.cos(.5*i[1]),o=Math.sin(.5*i[2]),a=Math.cos(.5*i[2]);"XYZ"===n?(t[0]=r*e*a+s*h*o,t[1]=s*h*a-r*e*o,t[2]=s*e*o+r*h*a,t[3]=s*e*a-r*h*o):"YXZ"===n?(t[0]=r*e*a+s*h*o,t[1]=s*h*a-r*e*o,t[2]=s*e*o-r*h*a,t[3]=s*e*a+r*h*o):"ZXY"===n?(t[0]=r*e*a-s*h*o,t[1]=s*h*a+r*e*o,t[2]=s*e*o+r*h*a,t[3]=s*e*a-r*h*o):"ZYX"===n?(t[0]=r*e*a-s*h*o,t[1]=s*h*a+r*e*o,t[2]=s*e*o-r*h*a,t[3]=s*e*a+r*h*o):"YZX"===n?(t[0]=r*e*a+s*h*o,t[1]=s*h*a+r*e*o,t[2]=s*e*o-r*h*a,t[3]=s*e*a-r*h*o):"XZY"===n&&(t[0]=r*e*a-s*h*o,t[1]=s*h*a-r*e*o,t[2]=s*e*o+r*h*a,t[3]=s*e*a+r*h*o)}(this.I,t.I,t.order),this},t}());function N(t,i,n){var r=i[0],s=i[1],h=i[2],e=i[3],o=i[4],a=i[5],u=i[6],v=i[7],c=i[8],f=i[9],d=i[10],l=i[11],w=i[12],m=i[13],y=i[14],p=i[15],b=n[0],x=n[1],M=n[2],_=n[3];return t[0]=b*r+x*o+M*c+_*w,t[1]=b*s+x*a+M*f+_*m,t[2]=b*h+x*u+M*d+_*y,t[3]=b*e+x*v+M*l+_*p,b=n[4],x=n[5],M=n[6],_=n[7],t[4]=b*r+x*o+M*c+_*w,t[5]=b*s+x*a+M*f+_*m,t[6]=b*h+x*u+M*d+_*y,t[7]=b*e+x*v+M*l+_*p,b=n[8],x=n[9],M=n[10],_=n[11],t[8]=b*r+x*o+M*c+_*w,t[9]=b*s+x*a+M*f+_*m,t[10]=b*h+x*u+M*d+_*y,t[11]=b*e+x*v+M*l+_*p,b=n[12],x=n[13],M=n[14],_=n[15],t[12]=b*r+x*o+M*c+_*w,t[13]=b*s+x*a+M*f+_*m,t[14]=b*h+x*u+M*d+_*y,t[15]=b*e+x*v+M*l+_*p,t}var C=function(){function t(t,i,n,r,s,h,e,o,a,u,v,c,f,d,l,w){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===h&&(h=1),void 0===e&&(e=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===v&&(v=1),void 0===c&&(c=0),void 0===f&&(f=0),void 0===d&&(d=0),void 0===l&&(l=0),void 0===w&&(w=1),this.I=[t,i,n,r,s,h,e,o,a,u,v,c,f,d,l,w]}var i=t.prototype;return i.multiply=function(t,i){return i?N(this.I,t.I,i.I):N(this.I,this.I,t.I),this},i.L=function(t){var i,n;return i=this.I,n=t.I,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},i.Ci=function(t){var i=void 0===t?{}:t,n=i.Gi,r=i.Xi,s=i.near,h=i.Ii;return function(t,i,n,r,s){var h=1/Math.tan(i/2),e=1/(r-s);t[0]=h/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+r)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*r*e,t[15]=0}(this.I,n,r,s,h),this},i.Li=function(t){return function(t,i){var n=i[0],r=i[1],s=i[2],h=i[3],e=n+n,o=r+r,a=s+s,u=n*e,v=r*e,c=r*o,f=s*e,d=s*o,l=s*a,w=h*e,m=h*o,y=h*a;t[0]=1-c-l,t[1]=v+y,t[2]=f-m,t[3]=0,t[4]=v-y,t[5]=1-u-l,t[6]=d+w,t[7]=0,t[8]=f+m,t[9]=d-w,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this.I,t.I),this},i.inverse=function(t){var i,n,r,s,h,e,o,a,u,v,c,f,d,l,w,m,y,p,b,x,M,_,g,A,O,j,E,S,F,z,V;return void 0===t&&(t=this),i=this.I,n=t.I,r=n[0],s=n[1],h=n[2],e=n[3],o=n[4],a=n[5],u=n[6],v=n[7],c=n[8],f=n[9],d=n[10],l=n[11],w=n[12],m=n[13],y=n[14],p=n[15],(V=(b=r*a-s*o)*(z=d*p-l*y)-(x=r*u-h*o)*(F=f*p-l*m)+(M=r*v-e*o)*(S=f*y-d*m)+(_=s*u-h*a)*(E=c*p-l*w)-(g=s*v-e*a)*(j=c*y-d*w)+(A=h*v-e*u)*(O=c*m-f*w))&&(V=1/V,i[0]=(a*z-u*F+v*S)*V,i[1]=(h*F-s*z-e*S)*V,i[2]=(m*A-y*g+p*_)*V,i[3]=(d*g-f*A-l*_)*V,i[4]=(u*E-o*z-v*j)*V,i[5]=(r*z-h*E+e*j)*V,i[6]=(y*M-w*A-p*x)*V,i[7]=(c*A-d*M+l*x)*V,i[8]=(o*F-a*E+v*O)*V,i[9]=(s*E-r*F-e*O)*V,i[10]=(w*g-m*M+p*b)*V,i[11]=(f*M-c*g-l*b)*V,i[12]=(a*j-o*S-u*O)*V,i[13]=(r*S-s*j+h*O)*V,i[14]=(m*x-w*_-y*b)*V,i[15]=(c*_-f*x+d*b)*V),this},i.Ri=function(t,i,n){return function(t,i,n,r){var s=i[0],h=i[1],e=i[2],o=i[3],a=s+s,u=h+h,v=e+e,c=s*a,f=s*u,d=s*v,l=h*u,w=h*v,m=e*v,y=o*a,p=o*u,b=o*v,x=r[0],M=r[1],_=r[2];t[0]=(1-(l+m))*x,t[1]=(f+b)*x,t[2]=(d-p)*x,t[3]=0,t[4]=(f-b)*M,t[5]=(1-(c+m))*M,t[6]=(w+y)*M,t[7]=0,t[8]=(d+p)*_,t[9]=(w-y)*_,t[10]=(1-(c+l))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1}(this.I,t.I,i.I,n.I),this},i.Yi=function(t){var i,n,r,s;return i=t.I,n=this.I,r=n[0]+n[5]+n[10],s=0,r>0?(s=2*Math.sqrt(r+1),i[3]=.25*s,i[0]=(n[6]-n[9])/s,i[1]=(n[8]-n[2])/s,i[2]=(n[1]-n[4])/s):n[0]>n[5]&&n[0]>n[10]?(s=2*Math.sqrt(1+n[0]-n[5]-n[10]),i[3]=(n[6]-n[9])/s,i[0]=.25*s,i[1]=(n[1]+n[4])/s,i[2]=(n[8]+n[2])/s):n[5]>n[10]?(s=2*Math.sqrt(1+n[5]-n[0]-n[10]),i[3]=(n[8]-n[2])/s,i[0]=(n[1]+n[4])/s,i[1]=.25*s,i[2]=(n[6]+n[9])/s):(s=2*Math.sqrt(1+n[10]-n[0]-n[5]),i[3]=(n[1]-n[4])/s,i[0]=(n[8]+n[2])/s,i[1]=(n[6]+n[9])/s,i[2]=.25*s),this},i.Ai=function(t){var i,n;return i=t.I,n=this.I,i[0]=n[12],i[1]=n[13],i[2]=n[14],this},i.Zi=function(){return t=this.I,i=t[0],n=t[1],r=t[2],s=t[4],h=t[5],e=t[6],o=t[8],a=t[9],u=t[10],v=i*i+n*n+r*r,c=s*s+h*h+e*e,f=o*o+a*a+u*u,Math.sqrt(Math.max(v,c,f));var t,i,n,r,s,h,e,o,a,u,v,c,f},i.Di=function(t,i,n){return function(t,i,n,r){var s=i[0],h=i[1],e=i[2],o=r[0],a=r[1],u=r[2],v=s-n[0],c=h-n[1],f=e-n[2],d=v*v+c*c+f*f;d>0&&(v*=d=1/Math.sqrt(d),c*=d,f*=d);var l=a*f-u*c,w=u*v-o*f,m=o*c-a*v;(d=l*l+w*w+m*m)>0&&(l*=d=1/Math.sqrt(d),w*=d,m*=d),t[0]=l,t[1]=w,t[2]=m,t[3]=0,t[4]=c*m-f*w,t[5]=f*l-v*m,t[6]=v*w-c*l,t[7]=0,t[8]=v,t[9]=c,t[10]=f,t[11]=0,t[12]=s,t[13]=h,t[14]=e,t[15]=1}(this.I,t.I,i,n.I),this},i.Ui=function(){return t=this.I,i=t[0],n=t[1],r=t[2],s=t[3],h=t[4],e=t[5],o=t[6],a=t[7],u=t[8],v=t[9],c=t[10],f=t[11],d=t[12],l=t[13],w=t[14],m=t[15],(i*e-n*h)*(c*m-f*w)-(i*o-r*h)*(v*m-f*l)+(i*a-s*h)*(v*w-c*l)+(n*o-r*e)*(u*m-f*d)-(n*a-s*e)*(u*w-c*d)+(r*a-s*o)*(u*l-v*d);var t,i,n,r,s,h,e,o,a,u,v,c,f,d,l,w,m},t}();function G(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.C=r.C||!1,r.G=!0,"value"in r&&(r.X=!0),Object.defineProperty(t,r.key,r)}}var X=new C,I=function(){function t(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=t),void 0===r&&(r="YXZ"),this.I=[t,i,n],this.order=r,this.Vi=function(){}}var i,n,r,s=t.prototype;return s.ki=function(t,i){return void 0===i&&(i=this.order),function(t,i,n){void 0===n&&(n="YXZ"),"XYZ"===n?(t[1]=Math.asin(Math.min(Math.max(i[8],-1),1)),Math.abs(i[8])<.99999?(t[0]=Math.atan2(-i[9],i[10]),t[2]=Math.atan2(-i[4],i[0])):(t[0]=Math.atan2(i[6],i[5]),t[2]=0)):"YXZ"===n&&(t[0]=Math.asin(-Math.min(Math.max(i[9],-1),1)),Math.abs(i[9])<.99999?(t[1]=Math.atan2(i[8],i[10]),t[2]=Math.atan2(i[1],i[5])):(t[1]=Math.atan2(-i[2],i[0]),t[2]=0))}(this.I,t.I,i),this},s.Li=function(t,i){return void 0===i&&(i=this.order),X.Li(t),this.ki(X,i)},i=t,(n=[{key:"x",get:function(){return this.I[0]},set:function(t){this.I[0]=t,this.Vi()}},{key:"y",get:function(){return this.I[1]},set:function(t){this.I[1]=t,this.Vi()}},{key:"z",get:function(){return this.I[2]},set:function(t){this.I[2]=t,this.Vi()}}])&&G(i.prototype,n),r&&G(i,r),t}(),L=function(){function t(){var t=this;this.parent=null,this.children=[],this.visible=!0,this.matrix=new C,this.Oi=new C,this.Pi=!0,this.position=new w,this.Wi=new V,this.scale=new w(1),this.rotation=new I,this.Bi=new w(0,1,0),this.rotation.Vi=function(){return t.Wi.Ni(t.rotation)},this.Wi.Vi=function(){return t.rotation.Li(t.Wi)}}var i=t.prototype;return i.Ti=function(t,i){void 0===i&&(i=!0),i&&this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,i&&t&&t.qi(this,!1)},i.qi=function(t,i){void 0===i&&(i=!0),~this.children.indexOf(t)||this.children.push(t),i&&t.Ti(this,!1)},i.zi=function(t){this.Pi&&this.$i(),(this.Hi||t)&&(null===this.parent?this.Oi.L(this.matrix):this.Oi.multiply(this.parent.Oi,this.matrix),this.Hi=!1,t=!0);for(var i=0,n=this.children.length;i<n;i++)this.children[i].zi(t)},i.$i=function(){this.matrix.Ri(this.Wi,this.position,this.scale),this.Hi=!0},i.Mi=function(t){if(!t(this))for(var i=0,n=this.children.length;i<n;i++)this.children[i].Mi(t)},i.Di=function(t,i){void 0===i&&(i=!1),i?this.matrix.Di(this.position,t,this.Bi):this.matrix.Di(t,this.position,this.Bi),this.matrix.Yi(this.Wi),this.rotation.Li(this.Wi)},t}();new C;var R=new w,Y=new w,Z=function(t){var i,n;function r(i,n){var r,s=void 0===n?{}:n,h=s.near,e=void 0===h?.1:h,o=s.Ii,a=void 0===o?100:o,u=s.Gi,v=void 0===u?45:u,c=s.Xi,f=void 0===c?1:c,d=s.left,l=s.right,w=s.bottom,m=s.top;return(r=t.call(this,i)||this).near=e,r.Ii=a,r.Gi=v,r.Xi=f,r.projectionMatrix=new C,r.Ji=new C,r.ji=new C,d||l?r.Ki({left:d,right:l,bottom:w,top:m}):r.perspective(),r}n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var s=r.prototype;return s.perspective=function(t){var i=void 0===t?{}:t,n=i.near,r=void 0===n?this.near:n,s=i.Ii,h=void 0===s?this.Ii:s,e=i.Gi,o=void 0===e?this.Gi:e,a=i.Xi,u=void 0===a?this.Xi:a;return this.projectionMatrix.Ci({Gi:o*(Math.PI/180),Xi:u,near:r,Ii:h}),this.type="perspective",this},s.zi=function(){return t.prototype.zi.call(this),this.Ji.inverse(this.Oi),this.ji.multiply(this.projectionMatrix,this.Ji),this},s.Di=function(i){return t.prototype.Di.call(this,i,!0),this},s.xi=function(){this.Qi||(this.Qi=[new w,new w,new w,new w,new w,new w]);var t=this.ji.I;this.Qi[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).tn=t[15]-t[12],this.Qi[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).tn=t[15]+t[12],this.Qi[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).tn=t[15]+t[13],this.Qi[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).tn=t[15]-t[13],this.Qi[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).tn=t[15]-t[14],this.Qi[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).tn=t[15]+t[14];for(var i=0;i<6;i++){var n=1/this.Qi[i].Y();this.Qi[i].multiply(n),this.Qi[i].tn*=n}},s.gi=function(t){t.in.bounds&&t.in.bounds.wt!==1/0||t.in.yt();var i=R;i.L(t.in.bounds.lt),i.U(t.Oi);var n=t.in.bounds.wt*t.Oi.Zi();return this.nn(i,n)},s.nn=function(t,i){for(var n=Y,r=0;r<6;r++){var s=this.Qi[r];if(n.L(s).D(t)+s.tn<-i)return!1}return!0},r}(L);var D=function(){function t(t,i,n,r,s,h,e,o,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1),void 0===h&&(h=0),void 0===e&&(e=0),void 0===o&&(o=0),void 0===a&&(a=1),this.I=[t,i,n,r,s,h,e,o,a]}return t.prototype.rn=function(t){var i,n,r,s,h,e,o,a,u,v,c,f,d,l,w,m,y,p,b,x,M,_,g,A,O,j,E,S,F,z,V;return i=this.I,n=t.I,r=n[0],s=n[1],h=n[2],e=n[3],o=n[4],a=n[5],u=n[6],v=n[7],c=n[8],f=n[9],d=n[10],l=n[11],w=n[12],m=n[13],y=n[14],p=n[15],(V=(b=r*a-s*o)*(z=d*p-l*y)-(x=r*u-h*o)*(F=f*p-l*m)+(M=r*v-e*o)*(S=f*y-d*m)+(_=s*u-h*a)*(E=c*p-l*w)-(g=s*v-e*a)*(j=c*y-d*w)+(A=h*v-e*u)*(O=c*m-f*w))&&(V=1/V,i[0]=(a*z-u*F+v*S)*V,i[1]=(u*E-o*z-v*j)*V,i[2]=(o*F-a*E+v*O)*V,i[3]=(h*F-s*z-e*S)*V,i[4]=(r*z-h*E+e*j)*V,i[5]=(s*E-r*F-e*O)*V,i[6]=(m*A-y*g+p*_)*V,i[7]=(y*M-w*A-p*x)*V,i[8]=(w*g-m*M+p*b)*V),this},t}();var U=0,k=function(t){var i,n;function r(i,n){var r,s=void 0===n?{}:n,h=s.in,e=s.vt,o=s.mode,a=void 0===o?i.TRIANGLES:o,u=s._i,v=void 0===u||u,c=s.li,f=void 0===c?0:c;return(r=t.call(this,i)||this).t=i,r.id=U++,r.in=h,r.vt=e,r.mode=a,r._i=v,r.li=f,r.modelViewMatrix=new C,r.normalMatrix=new D,r.vt._t.sn||Object.assign(r.vt._t,{sn:{value:null},Ji:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},hn:{value:null}}),r}return n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n,r.prototype.draw=function(t){var i=(void 0===t?{}:t).pi;this.en&&this.en({on:this,pi:i}),i&&(this.vt._t.projectionMatrix.value=i.projectionMatrix,this.vt._t.hn.value=i.position,this.vt._t.Ji.value=i.Ji,this.modelViewMatrix.multiply(i.Ji,this.Oi),this.normalMatrix.rn(this.modelViewMatrix),this.vt._t.sn.value=this.Oi,this.vt._t.modelViewMatrix.value=this.modelViewMatrix,this.vt._t.normalMatrix.value=this.normalMatrix);var n=this.vt.cullFace&&this.Oi.Ui().I<0;this.vt.Wt({Bt:n}),this.in.draw({mode:this.mode,vt:this.vt}),this.an&&this.an({on:this,pi:i})},r}(L);function P(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return W(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function W(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}var B=function(t){var i,n;function r(i,n){var s=void 0===n?{}:n,h=s.width,e=void 0===h?1:h,o=s.height,a=void 0===o?1:o,u=s.attributes,v=void 0===u?{}:u,c=s.un,f=void 0===c?null:c;if(!f)throw new Error("need positions");for(var d,l=4*f.length,w=6*f.length,m=new Float32Array(3*l),y=new Float32Array(3*l),p=new Float32Array(2*l),b=l>65536?new Uint32Array(w):new Uint16Array(w),x=0,M=0,_=P(f);!(d=_()).done;){var g=d.value;r.vn.apply(r,[m,y,p,b,e,a,0,2,1,x,M].concat(g)),x+=4,M+=1}return Object.assign(v,{position:{size:3,data:m},normal:{size:3,data:y},cn:{size:2,data:p},index:{data:b}}),t.call(this,i,v)||this}return n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n,r.vn=function(t,i,n,r,s,h,e,o,a,u,v,c,f,d){void 0===e&&(e=0),void 0===o&&(o=1),void 0===a&&(a=2),void 0===u&&(u=0),void 0===v&&(v=0),void 0===c&&(c=0),void 0===f&&(f=0),void 0===d&&(d=0);for(var l=u,w=0;w<=1;w++)for(var m=w*h-h/2-f,y=0;y<=1;y++,u++){var p=y*s-s/2-c;if(t[3*u+e]=-p,t[3*u+o]=-m,t[3*u+a]=d,i[3*u+e]=0,i[3*u+o]=0,i[3*u+a]=1,n[2*u]=y,n[2*u+1]=1-w,1!==w&&1!==y){var b=l+y+2*w,x=l+y+2*(w+1),M=l+y+2*(w+1)+1,_=l+y+2*w+1;r[6*v]=b,r[6*v+1]=x,r[6*v+2]=_,r[6*v+3]=x,r[6*v+4]=M,r[6*v+5]=_,v++}}},r}(b);var T=function(t){var i,n;function r(i,n){var s=void 0===n?{}:n,h=s.width,e=void 0===h?1:h,o=s.height,a=void 0===o?1:o,u=s.fn,v=void 0===u?1:u,c=s.dn,f=void 0===c?1:c,d=s.attributes,l=void 0===d?{}:d,w=v,m=f,y=(w+1)*(m+1),p=w*m*6,b=new Float32Array(3*y),x=new Float32Array(3*y),M=new Float32Array(2*y),_=y>65536?new Uint32Array(p):new Uint16Array(p);return r.vn(b,x,M,_,e,a,0,w,m),Object.assign(l,{position:{size:3,data:b},normal:{size:3,data:x},cn:{size:2,data:M},index:{data:_}}),t.call(this,i,l)||this}return n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n,r.vn=function(t,i,n,r,s,h,e,o,a,u,v,c,f,d,l,w){void 0===u&&(u=0),void 0===v&&(v=1),void 0===c&&(c=2),void 0===f&&(f=1),void 0===d&&(d=-1),void 0===l&&(l=0),void 0===w&&(w=0);for(var m=l,y=s/o,p=h/a,b=0;b<=a;b++)for(var x=b*p-h/2,M=0;M<=o;M++,l++){var _=M*y-s/2;if(t[3*l+u]=_*f,t[3*l+v]=x*d,t[3*l+c]=e/2,i[3*l+u]=0,i[3*l+v]=0,i[3*l+c]=e>=0?1:-1,n[2*l]=M/o,n[2*l+1]=1-b/a,b!==a&&M!==o){var g=m+M+b*(o+1),A=m+M+(b+1)*(o+1),O=m+M+(b+1)*(o+1)+1,j=m+M+b*(o+1)+1;r[6*w]=g,r[6*w+1]=A,r[6*w+2]=j,r[6*w+3]=A,r[6*w+4]=O,r[6*w+5]=j,w++}}},r}(b);var q=function(t){var i,n;function r(i,n){var r=void 0===n?{}:n,s=r.width,h=void 0===s?1:s,e=r.height,o=void 0===e?1:e,a=r.Ht,u=void 0===a?1:a,v=r.fn,c=void 0===v?1:v,f=r.dn,d=void 0===f?1:f,l=r.ln,w=void 0===l?1:l,m=r.attributes,y=void 0===m?{}:m,p=c,b=d,x=w,M=(p+1)*(b+1)*2+(p+1)*(x+1)*2+(b+1)*(x+1)*2,_=6*(p*b*2+p*x*2+b*x*2),g=new Float32Array(3*M),A=new Float32Array(3*M),O=new Float32Array(2*M),j=M>65536?new Uint32Array(_):new Uint16Array(_),E=0,S=0;return T.vn(g,A,O,j,u,o,h,x,b,2,1,0,-1,-1,E,S),T.vn(g,A,O,j,u,o,-h,x,b,2,1,0,1,-1,E+=(x+1)*(b+1),S+=x*b),T.vn(g,A,O,j,h,u,o,x,b,0,2,1,1,1,E+=(x+1)*(b+1),S+=x*b),T.vn(g,A,O,j,h,u,-o,x,b,0,2,1,1,-1,E+=(p+1)*(x+1),S+=p*x),T.vn(g,A,O,j,h,o,-u,p,b,0,1,2,-1,-1,E+=(p+1)*(x+1),S+=p*x),T.vn(g,A,O,j,h,o,u,p,b,0,1,2,1,-1,E+=(p+1)*(b+1),S+=p*b),Object.assign(y,{position:{size:3,data:g},normal:{size:3,data:A},cn:{size:2,data:O},index:{data:j}}),t.call(this,i,y)||this}return n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n,r}(b);function $(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return H(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function H(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function J(t){for(var i,n=0,r=0,s=$(t);!(i=s()).done;)for(var h,e=$(i.value);!(h=e()).done;){var o=h.value;r+=o.count-0;var a=o.count-0;n<a&&(n=a)}return{wn:n,mn:r}}function K(t,i,n){return(K=Q()?Reflect.construct:function(t,i,n){var r=[null];r.push.apply(r,i);var s=new(Function.bind.apply(t,r));return n&&tt(s,n.prototype),s}).apply(null,arguments)}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function tt(t,i){return(tt=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}
/*! ContributeForest v0.0.3 | Yukimasa Funaoka <yukimasafunaoka@gmail.com> */var it=function(){function t(t){for(var i in this.yn=document.body,this.data=[],this.pn=800,this.bn=350,this.xn=5.5,this.Mn=1.8,this._n=.25,t)this[i]=t[i];this.w=this.pn,this.gn=this.bn,this.An=this.bn/this.pn,this.animate=this.animate.bind(this),this.On=this.On.bind(this),this.jn=this.Mn+this._n,this.En=Date.now(),this.wn=J(this.data).wn,this.q=new S({Kt:!0}),this.t=this.q.t,document.getElementById("forest-view").appendChild(this.t.canvas),this.t.clearColor(1,1,1,1),this.Sn=[],this.yi=new L,this.pi=new Z(this.t,{Gi:30,Ii:1e3}),this.pi.position.set(0,0,100),this.pi.Di([0,0,0]),this.Fn(),this.On(),window.addEventListener("resize",this.On)}var i=t.prototype;return i.On=function(){this.w=Math.min(window.innerWidth,this.pn),this.gn=this.w*this.An,this.q.$t=Math.max(window.devicePixelRatio,2),this.q.si(this.w,this.gn),this.pi.perspective({Xi:this.t.canvas.width/this.t.canvas.height}),this.q.Fi({yi:this.yi,pi:this.pi})},i.Fn=function(){for(var t=this,i=this.data.length,n=new q(this.t,{width:this.Mn,Ht:this.Mn,height:this.xn}),r=new _(this.t,{xt:"precision highp float;precision highp int;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;void main(){vec4 t;t.xyz=position;t.w=1.0;gl_Position=projectionMatrix*modelViewMatrix*t;}",Mt:"precision highp float;precision highp int;void main(){gl_FragColor.xyz=vec3(0.93333);gl_FragColor.w=1.0;}"}),s=new _(this.t,{xt:"precision highp float;precision highp int;attribute vec3 position;attribute vec3 normal;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat3 normalMatrix;varying vec3 vN;void main(){vN=normalize(normalMatrix*normal);vec4 t;t.w=1.0;t.xyz=position;gl_Position=projectionMatrix*modelViewMatrix*t;}",Mt:"precision highp int;precision highp float;uniform vec3 color;varying vec3 vN;void main(){float t=(max(dot(vN,vec3(0.0,0.5734624,0.8192319)),0.0)*1.07);gl_FragColor.xyz=((((color-1.0)*vec3((0.666+(t/3.0))))+1.0)+(vec3((t-0.82))*0.5));gl_FragColor.w=1.0;}",_t:{color:{value:null}}}),e=[],o=0;o<this.data.length;o++){var a=this.data[o];this.Sn[o]=[];for(var u=0+(o-i/2-2)*this.jn,v=function(r){var v=r*t.jn,c=a[r].count/t.wn*.2,f=K(w,h(360/i*o,.7,.65-c)),d=new k(t.t,{in:n,vt:s});d.position.set(u,8.25,v),d.en=function(){s._t.color.value=f},d.Ti(t.yi),t.Sn[o][r]=d,e.push([u,v])},c=0;c<a.length;c++)v(c)}var f=new B(this.t,{width:this.Mn,height:this.Mn,un:e});new k(this.t,{in:f,vt:r}).Ti(this.yi),this.yi.rotation.x=.32,this.yi.rotation.y=-.64,this.yi.rotation.z=-.22,this.q.Fi({yi:this.yi,pi:this.pi})},i.animate=function(){var t,i=(Date.now()-this.En)/16.6666,n=this.Sn.length+20;i<n&&requestAnimationFrame(this.animate);for(var s=0;s<this.Sn.length;s++)for(var h=0;h<this.Sn[s].length;h++){var e=this.Sn[s][h],o=this.data[s][h],a=0;i>=s&&(t=(i-s)/20,a=(t-=1)*t*(2.7*t+1.7)+1,i-s>=20&&(a=1)),a*=(o.count-0)/this.wn*3,e.position.set(e.position.x,this.xn*a/2,e.position.z),a&&(e.scale.y=a),e.visible=!!a}var u=i/n;this.yi.rotation.x=.32+.18*r(u),this.yi.rotation.y=.2*r(u)-.64,this.q.Fi({yi:this.yi,pi:this.pi})},t}(),nt=function(t){var i=document.getElementById("forest-view");i.className="loaded",new it({data:t,yn:i}).animate(),function(t){var i=document.getElementById("forest-view__contributions__count"),n=J(t).mn,s=t.length+13,h=new Intl.NumberFormat,e=Date.now(),o=0;!function t(){var a=(Date.now()-e)/16.6666;a<s&&(requestAnimationFrame(t),++o%2)||(i.textContent=h.format(n*r(a/s)|0))}()}(t)}}]]);