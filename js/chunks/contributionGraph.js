(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(t,i,s){"use strict";function h(t){return-(Math.pow(t-1,2)-1)}s.r(i);const e=(t,i,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+(i-t)*(2/3-s)*6:t);var r=(t,i,s)=>{let h,r,n;if(t/=360,0==i)h=r=n=s;else{const a=s<.5?s*(1+i):s+i-s*i,o=2*s-a;h=e(o,a,t+1/3),r=e(o,a,t),n=e(o,a,t-1/3)}return[h,r,n]};const n="precision highp float;precision highp int;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;void main(){vec4 t;t.xyz=position;t.w=1.0;gl_Position=projectionMatrix*modelViewMatrix*t;}",a=()=>"precision highp float;precision highp int;void main(){gl_FragColor.xyz=vec3(0.93333);gl_FragColor.w=1.0;}",o="precision highp float;precision highp int;attribute vec3 position;attribute vec3 normal;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat3 normalMatrix;varying vec3 vN;void main(){vN=normalize(normalMatrix*normal);vec4 t;t.w=1.0;t.xyz=position;gl_Position=projectionMatrix*modelViewMatrix*t;}",u="precision highp int;precision highp float;uniform vec3 color;varying vec3 vN;void main(){float t=(max(dot(vN,vec3(0.0,0.5734624,0.8192319)),0.0)*1.07);gl_FragColor.xyz=((((color-1.0)*vec3((0.666+(t/3.0))))+1.0)+(vec3((t-0.82))*0.5));gl_FragColor.w=1.0;}";function c(t){let i=t[0],s=t[1],h=t[2];return Math.sqrt(i*i+s*s+h*h)}function l(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t}function f(t,i,s){return t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function d(t,i,s){return t[0]=i[0]-s[0],t[1]=i[1]-s[1],t[2]=i[2]-s[2],t}function p(t,i,s){return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t}function m(t,i){let s=i[0],h=i[1],e=i[2],r=s*s+h*h+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t}function w(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}function M(t,i,s){let h=i[0],e=i[1],r=i[2],n=s[0],a=s[1],o=s[2];return t[0]=e*o-r*a,t[1]=r*n-h*o,t[2]=h*a-e*n,t}const v=function(){const t=[0,0,0],i=[0,0,0];return function(s,h){l(t,s),l(i,h),m(t,t),m(i,i);let e=w(t,i);return e>1?0:e<-1?Math.PI:Math.acos(e)}}();class g extends Array{constructor(t=0,i=t,s=t){return super(t,i,s),this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}set(t,i=t,s=t){return function(t,i,s,h){t[0]=i,t[1]=s,t[2]=h}(this,t,i,s),this}t(t){return l(this,t),this}add(t,i){return i?f(this,t,i):f(this,this,t),this}sub(t,i){return i?d(this,t,i):d(this,this,t),this}multiply(t){var i,s,h;return t.length?(s=this,h=t,(i=this)[0]=s[0]*h[0],i[1]=s[1]*h[1],i[2]=s[2]*h[2]):p(this,this,t),this}i(t){var i,s,h;return t.length?(s=this,h=t,(i=this)[0]=s[0]/h[0],i[1]=s[1]/h[1],i[2]=s[2]/h[2]):p(this,this,1/t),this}inverse(t=this){var i,s;return s=t,(i=this)[0]=1/s[0],i[1]=1/s[1],i[2]=1/s[2],this}s(){return c(this)}h(t){return t?function(t,i){let s=i[0]-t[0],h=i[1]-t[1],e=i[2]-t[2];return Math.sqrt(s*s+h*h+e*e)}(this,t):c(this)}o(){return this.u()}u(t){return t?function(t,i){let s=i[0]-t[0],h=i[1]-t[1],e=i[2]-t[2];return s*s+h*h+e*e}(this,t):function(t){let i=t[0],s=t[1],h=t[2];return i*i+s*s+h*h}(this)}l(t=this){var i,s;return s=t,(i=this)[0]=-s[0],i[1]=-s[1],i[2]=-s[2],this}p(t,i){return M(this,t,i),this}scale(t){return p(this,this,t),this}normalize(){return m(this,this),this}m(t){return w(this,t)}M(t){return s=t,(i=this)[0]===s[0]&&i[1]===s[1]&&i[2]===s[2];var i,s}v(t){return function(t,i,s){let h=i[0],e=i[1],r=i[2],n=s[3]*h+s[7]*e+s[11]*r+s[15];n=n||1,t[0]=(s[0]*h+s[4]*e+s[8]*r+s[12])/n,t[1]=(s[1]*h+s[5]*e+s[9]*r+s[13])/n,t[2]=(s[2]*h+s[6]*e+s[10]*r+s[14])/n}(this,this,t),this}g(t){return function(t,i,s){let h=i[0],e=i[1],r=i[2],n=s[0],a=s[1],o=s[2],u=a*r-o*e,c=o*h-n*r,l=n*e-a*h,f=a*l-o*c,d=o*u-n*l,p=n*c-a*u,m=2*s[3];u*=m,c*=m,l*=m,f*=2,d*=2,p*=2,t[0]=h+u+f,t[1]=e+c+d,t[2]=r+l+p}(this,this,t),this}angle(t){return v(this,t)}A(t,i){return function(t,i,s,h){let e=i[0],r=i[1],n=i[2];t[0]=e+h*(s[0]-e),t[1]=r+h*(s[1]-r),t[2]=n+h*(s[2]-n)}(this,this,t,i),this}clone(){return new g(this[0],this[1],this[2])}_(t,i=0){return this[0]=t[i],this[1]=t[i+1],this[2]=t[i+2],this}toArray(t=[],i=0){return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t}F(t){const i=this[0],s=this[1],h=this[2];return this[0]=t[0]*i+t[4]*s+t[8]*h,this[1]=t[1]*i+t[5]*s+t[9]*h,this[2]=t[2]*i+t[6]*s+t[10]*h,this.normalize()}}const x=new g;let y=0,A=0;class b{constructor(t,i={}){this.S=t,this.attributes=i,this.id=y++,this.O={start:0,count:0},this.X=0,this.S.N.j(null),this.S.N.Y=null,this.Z=this.S.N.state;for(let t in i)this.B(t,i[t])}B(t,i){if(this.attributes[t]=i,i.id=A++,i.size=i.size||1,i.type=i.type||(i.data.constructor===Float32Array?this.S.FLOAT:i.data.constructor===Uint16Array?this.S.UNSIGNED_SHORT:this.S.UNSIGNED_INT),i.target="index"===t?this.S.ELEMENT_ARRAY_BUFFER:this.S.ARRAY_BUFFER,i.normalize=i.normalize||!1,i.buffer=this.S.createBuffer(),i.count=i.data.length/i.size,i.divisor=i.V?"number"==typeof i.V?i.V:1:0,i.C=!1,this.q(i),i.divisor){if(this.D=!0,this.X&&this.X!==i.count*i.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.X=Math.min(this.X,i.count*i.divisor);this.X=i.count*i.divisor}else"index"===t?this.O.count=i.count:this.attributes.index||(this.O.count=Math.max(this.O.count,i.count))}q(t){this.Z.I!==t.id&&(this.S.bindBuffer(t.target,t.buffer),this.Z.I=t.id),this.S.bufferData(t.target,t.data,this.S.STATIC_DRAW),t.C=!1}L(t){this.B("index",t)}P(t,i){this.O.start=t,this.O.count=i}$(t){this.X=t}G(t){this.U=this.S.N.R(),this.S.N.j(this.U),this.T(t)}T(t){t.W.forEach((t,i)=>{if(!this.attributes[i])return void console.warn(`active attribute ${i} not being supplied`);const s=this.attributes[i];this.S.bindBuffer(s.target,s.buffer),this.Z.I=s.id,this.S.vertexAttribPointer(t,s.size,s.type,s.normalize,0,0),this.S.enableVertexAttribArray(t),this.S.N.k(t,s.divisor)}),this.attributes.index&&this.S.bindBuffer(this.S.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({H:t,mode:i=this.S.TRIANGLES,J:s=!1}){s||(this.U||this.G(t),this.S.N.j(this.U),this.S.N.Y=this.id),t.W.forEach((t,i)=>{const s=this.attributes[i];s.C&&this.q(s)}),this.D?this.attributes.index?this.S.N.K(i,this.O.count,this.attributes.index.type,this.O.start,this.X):this.S.N.tt(i,this.O.start,this.O.count,this.X):this.attributes.index?this.S.drawElements(i,this.O.count,this.attributes.index.type,this.O.start):this.S.drawArrays(i,this.O.start,this.O.count)}it(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||(this.bounds={min:new g,max:new g,st:new g,scale:new g,ht:1/0});const i=this.bounds.min,s=this.bounds.max,h=this.bounds.st,e=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let h=0,e=t.length;h<e;h+=3){const e=t[h],r=t[h+1],n=t[h+2];i.x=Math.min(e,i.x),i.y=Math.min(r,i.y),i.z=Math.min(n,i.z),s.x=Math.max(e,s.x),s.y=Math.max(r,s.y),s.z=Math.max(n,s.z)}e.sub(s,i),h.add(i,s).i(2)}et(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||this.it(t);let i=0;for(let s=0,h=t.length;s<h;s+=3)x._(t,s),i=Math.max(i,this.bounds.st.u(x));this.bounds.ht=Math.sqrt(i)}remove(){this.U&&this.S.N.rt(this.U);for(let t in this.attributes)this.S.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let _=0;const F={};class z{constructor(t,{nt:i,at:s,ot:h={},ut:e=!1,cullFace:r=t.BACK,frontFace:n=t.CCW,ct:a=!0,lt:o=!0,depthFunc:u=t.LESS}={}){this.S=t,this.ot=h,this.id=_++,i||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.ut=e,this.cullFace=r,this.frontFace=n,this.ct=a,this.lt=o,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.ut&&!this.blendFunc.src&&(this.S.N.ft?this.dt(this.S.ONE,this.S.ONE_MINUS_SRC_ALPHA):this.dt(this.S.SRC_ALPHA,this.S.ONE_MINUS_SRC_ALPHA));const c=t.createShader(t.VERTEX_SHADER);t.shaderSource(c,i),t.compileShader(c),""!==t.getShaderInfoLog(c)&&console.warn(`${t.getShaderInfoLog(c)}\nVertex Shader\n${S(i)}`);const l=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(l,s),t.compileShader(l),""!==t.getShaderInfoLog(l)&&console.warn(`${t.getShaderInfoLog(l)}\nFragment Shader\n${S(s)}`),this.H=t.createProgram(),t.attachShader(this.H,c),t.attachShader(this.H,l),t.linkProgram(this.H),!t.getProgramParameter(this.H,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.H));t.deleteShader(c),t.deleteShader(l),this.pt=new Map;let f=t.getProgramParameter(this.H,t.ACTIVE_UNIFORMS);for(let i=0;i<f;i++){let s=t.getActiveUniform(this.H,i);this.pt.set(s,t.getUniformLocation(this.H,s.name));const h=s.name.match(/(\w+)/g);s.wt=h[0],3===h.length?(s.Mt=!0,s.vt=Number(h[1]),s.gt=h[2]):2===h.length&&isNaN(Number(h[1]))&&(s.xt=!0,s.gt=h[1])}this.W=new Map;let d=t.getProgramParameter(this.H,t.ACTIVE_ATTRIBUTES);for(let i=0;i<d;i++){let s=t.getActiveAttrib(this.H,i);this.W.set(s.name,t.getAttribLocation(this.H,s.name))}}dt(t,i,s,h){this.blendFunc.src=t,this.blendFunc.yt=i,this.blendFunc.At=s,this.blendFunc.bt=h,t&&(this.ut=!0)}_t(t,i){this.blendEquation.Ft=t,this.blendEquation.zt=i}Et(){this.ct?this.S.N.enable(this.S.DEPTH_TEST):this.S.N.disable(this.S.DEPTH_TEST),this.cullFace?this.S.N.enable(this.S.CULL_FACE):this.S.N.disable(this.S.CULL_FACE),this.blendFunc.src?this.S.N.enable(this.S.BLEND):this.S.N.disable(this.S.BLEND),this.cullFace&&this.S.N.St(this.cullFace),this.S.N.Ot(this.frontFace),this.S.N.Xt(this.lt),this.S.N.jt(this.depthFunc),this.blendFunc.src&&this.S.N.dt(this.blendFunc.src,this.blendFunc.yt,this.blendFunc.At,this.blendFunc.bt),this.blendEquation.Ft&&this.S.N._t(this.blendEquation.Ft,this.blendEquation.zt)}Nt({Yt:t=!1,Zt:i=!1}={}){let s=-1;t||(this.S.useProgram(this.H),this.S.N.Bt=this.id),this.pt.forEach((t,i)=>{let h=i.wt,e=this.ot[h];if(i.xt&&(e=e[i.gt],h+=`.${i.gt}`),i.Mt&&(e=e[i.vt][i.gt],h+=`[${i.vt}].${i.gt}`),!e)return X(`Active uniform ${h} has not been supplied`);if(e&&void 0===e.value)return X(`${h} uniform is missing a value parameter`);if(e.value.Vt)return s+=1,e.value.update(s),E(this.S,i.type,t,s);if(e.value.length&&e.value[0].Vt){const h=[];return e.value.forEach(t=>{s+=1,t.update(s),h.push(s)}),E(this.S,i.type,t,h)}E(this.S,i.type,t,e.value)}),this.Et(),i&&this.S.N.Ot(this.frontFace===this.S.CCW?this.S.CW:this.S.CCW)}remove(){this.S.deleteProgram(this.H)}}function E(t,i,s,h){h=h.length?function(t){const i=t.length,s=t[0].length;if(void 0===s)return t;const h=i*s;let e=F[h];e||(F[h]=e=new Float32Array(h));for(let h=0;h<i;h++)e.set(t[h],h*s);return e}(h):h;const e=t.N.state.pt.get(s);if(h.length)if(void 0===e)t.N.state.pt.set(s,h.slice(0));else{if(function(t,i){if(t.length!==i.length)return!1;for(let s=0,h=t.length;s<h;s++)if(t[s]!==i[s])return!1;return!0}(e,h))return;e.set(h),t.N.state.pt.set(s,e)}else{if(e===h)return;t.N.state.pt.set(s,h)}switch(i){case 5126:return h.length?t.uniform1fv(s,h):t.uniform1f(s,h);case 35664:return t.uniform2fv(s,h);case 35665:return t.uniform3fv(s,h);case 35666:return t.uniform4fv(s,h);case 35670:case 5124:case 35678:case 35680:return h.length?t.uniform1iv(s,h):t.uniform1i(s,h);case 35671:case 35667:return t.uniform2iv(s,h);case 35672:case 35668:return t.uniform3iv(s,h);case 35673:case 35669:return t.uniform4iv(s,h);case 35674:return t.uniformMatrix2fv(s,!1,h);case 35675:return t.uniformMatrix3fv(s,!1,h);case 35676:return t.uniformMatrix4fv(s,!1,h)}}function S(t){let i=t.split("\n");for(let t=0;t<i.length;t++)i[t]=t+1+": "+i[t];return i.join("\n")}let O=0;function X(t){O>100||(console.warn(t),++O>100&&console.warn("More than 100 program warnings - stopping logs."))}function j(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,i,s){let h=i[0],e=i[1],r=i[2],n=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=i[9],d=i[10],p=i[11],m=i[12],w=i[13],M=i[14],v=i[15],g=s[0],x=s[1],y=s[2],A=s[3];return t[0]=g*h+x*a+y*l+A*m,t[1]=g*e+x*o+y*f+A*w,t[2]=g*r+x*u+y*d+A*M,t[3]=g*n+x*c+y*p+A*v,g=s[4],x=s[5],y=s[6],A=s[7],t[4]=g*h+x*a+y*l+A*m,t[5]=g*e+x*o+y*f+A*w,t[6]=g*r+x*u+y*d+A*M,t[7]=g*n+x*c+y*p+A*v,g=s[8],x=s[9],y=s[10],A=s[11],t[8]=g*h+x*a+y*l+A*m,t[9]=g*e+x*o+y*f+A*w,t[10]=g*r+x*u+y*d+A*M,t[11]=g*n+x*c+y*p+A*v,g=s[12],x=s[13],y=s[14],A=s[15],t[12]=g*h+x*a+y*l+A*m,t[13]=g*e+x*o+y*f+A*w,t[14]=g*r+x*u+y*d+A*M,t[15]=g*n+x*c+y*p+A*v,t}class Y extends Array{constructor(t=1,i=0,s=0,h=0,e=0,r=1,n=0,a=0,o=0,u=0,c=1,l=0,f=0,d=0,p=0,m=1){return super(t,i,s,h,e,r,n,a,o,u,c,l,f,d,p,m),this}set x(t){this[12]=t}get x(){return this[12]}set y(t){this[13]=t}get y(){return this[13]}set z(t){this[14]=t}get z(){return this[14]}set w(t){this[15]=t}get w(){return this[15]}set(t,i,s,h,e,r,n,a,o,u,c,l,f,d,p,m){return t.length?this.t(t):(function(t,i,s,h,e,r,n,a,o,u,c,l,f,d,p,m,w){t[0]=i,t[1]=s,t[2]=h,t[3]=e,t[4]=r,t[5]=n,t[6]=a,t[7]=o,t[8]=u,t[9]=c,t[10]=l,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=w}(this,t,i,s,h,e,r,n,a,o,u,c,l,f,d,p,m),this)}translate(t,i=this){return function(t,i,s){let h,e,r,n,a,o,u,c,l,f,d,p,m=s[0],w=s[1],M=s[2];i===t?(t[12]=i[0]*m+i[4]*w+i[8]*M+i[12],t[13]=i[1]*m+i[5]*w+i[9]*M+i[13],t[14]=i[2]*m+i[6]*w+i[10]*M+i[14],t[15]=i[3]*m+i[7]*w+i[11]*M+i[15]):(h=i[0],e=i[1],r=i[2],n=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=i[9],d=i[10],p=i[11],t[0]=h,t[1]=e,t[2]=r,t[3]=n,t[4]=a,t[5]=o,t[6]=u,t[7]=c,t[8]=l,t[9]=f,t[10]=d,t[11]=p,t[12]=h*m+a*w+l*M+i[12],t[13]=e*m+o*w+f*M+i[13],t[14]=r*m+u*w+d*M+i[14],t[15]=n*m+c*w+p*M+i[15])}(this,i,t),this}Ct(t,i=this){return function(t,i,s){let h=Math.sin(s),e=Math.cos(s),r=i[4],n=i[5],a=i[6],o=i[7],u=i[8],c=i[9],l=i[10],f=i[11];i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[4]=r*e+u*h,t[5]=n*e+c*h,t[6]=a*e+l*h,t[7]=o*e+f*h,t[8]=u*e-r*h,t[9]=c*e-n*h,t[10]=l*e-a*h,t[11]=f*e-o*h}(this,i,t),this}qt(t,i=this){return function(t,i,s){let h=Math.sin(s),e=Math.cos(s),r=i[0],n=i[1],a=i[2],o=i[3],u=i[8],c=i[9],l=i[10],f=i[11];i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=r*e-u*h,t[1]=n*e-c*h,t[2]=a*e-l*h,t[3]=o*e-f*h,t[8]=r*h+u*e,t[9]=n*h+c*e,t[10]=a*h+l*e,t[11]=o*h+f*e}(this,i,t),this}Dt(t,i=this){return function(t,i,s){let h=Math.sin(s),e=Math.cos(s),r=i[0],n=i[1],a=i[2],o=i[3],u=i[4],c=i[5],l=i[6],f=i[7];i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=r*e+u*h,t[1]=n*e+c*h,t[2]=a*e+l*h,t[3]=o*e+f*h,t[4]=u*e-r*h,t[5]=c*e-n*h,t[6]=l*e-a*h,t[7]=f*e-o*h}(this,i,t),this}scale(t,i=this){return function(t,i,s){let h=s[0],e=s[1],r=s[2];t[0]=i[0]*h,t[1]=i[1]*h,t[2]=i[2]*h,t[3]=i[3]*h,t[4]=i[4]*e,t[5]=i[5]*e,t[6]=i[6]*e,t[7]=i[7]*e,t[8]=i[8]*r,t[9]=i[9]*r,t[10]=i[10]*r,t[11]=i[11]*r,t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]}(this,i,"number"==typeof t?[t,t,t]:t),this}multiply(t,i){return i?N(this,t,i):N(this,this,t),this}identity(){return j(this),this}t(t){var i,s;return s=t,(i=this)[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],this}It({Lt:t,Pt:i,near:s,$t:h}={}){return function(t,i,s,h,e){let r=1/Math.tan(i/2),n=1/(h-e);t[0]=r/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+h)*n,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*h*n,t[15]=0}(this,t,i,s,h),this}Gt({left:t,right:i,bottom:s,top:h,near:e,$t:r}){return function(t,i,s,h,e,r,n){let a=1/(i-s),o=1/(h-e),u=1/(r-n);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+s)*a,t[13]=(e+h)*o,t[14]=(n+r)*u,t[15]=1}(this,t,i,s,h,e,r),this}Ut(t){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=s+s,a=h+h,o=e+e,u=s*n,c=h*n,l=h*a,f=e*n,d=e*a,p=e*o,m=r*n,w=r*a,M=r*o;t[0]=1-l-p,t[1]=c+M,t[2]=f-w,t[3]=0,t[4]=c-M,t[5]=1-u-p,t[6]=d+m,t[7]=0,t[8]=f+w,t[9]=d-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=i[4],a=i[5],o=i[6],u=i[7],c=i[8],l=i[9],f=i[10],d=i[11],p=i[12],m=i[13],w=i[14],M=i[15],v=s*a-h*n,g=s*o-e*n,x=s*u-r*n,y=h*o-e*a,A=h*u-r*a,b=e*u-r*o,_=c*m-l*p,F=c*w-f*p,z=c*M-d*p,E=l*w-f*m,S=l*M-d*m,O=f*M-d*w,X=v*O-g*S+x*E+y*z-A*F+b*_;X&&(X=1/X,t[0]=(a*O-o*S+u*E)*X,t[1]=(e*S-h*O-r*E)*X,t[2]=(m*b-w*A+M*y)*X,t[3]=(f*A-l*b-d*y)*X,t[4]=(o*z-n*O-u*F)*X,t[5]=(s*O-e*z+r*F)*X,t[6]=(w*x-p*b-M*g)*X,t[7]=(c*b-f*x+d*g)*X,t[8]=(n*S-a*z+u*_)*X,t[9]=(h*z-s*S-r*_)*X,t[10]=(p*A-m*x+M*v)*X,t[11]=(l*x-c*A-d*v)*X,t[12]=(a*F-n*E-o*_)*X,t[13]=(s*E-h*F+e*_)*X,t[14]=(m*g-p*y-w*v)*X,t[15]=(c*y-l*g+f*v)*X)}(this,t),this}Rt(t,i,s){return function(t,i,s,h){let e=i[0],r=i[1],n=i[2],a=i[3],o=e+e,u=r+r,c=n+n,l=e*o,f=e*u,d=e*c,p=r*u,m=r*c,w=n*c,M=a*o,v=a*u,g=a*c,x=h[0],y=h[1],A=h[2];t[0]=(1-(p+w))*x,t[1]=(f+g)*x,t[2]=(d-v)*x,t[3]=0,t[4]=(f-g)*y,t[5]=(1-(l+w))*y,t[6]=(m+M)*y,t[7]=0,t[8]=(d+v)*A,t[9]=(m-M)*A,t[10]=(1-(l+p))*A,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1}(this,t,i,s),this}Tt(t){return function(t,i){let s=i[0]+i[5]+i[10],h=0;s>0?(h=2*Math.sqrt(s+1),t[3]=.25*h,t[0]=(i[6]-i[9])/h,t[1]=(i[8]-i[2])/h,t[2]=(i[1]-i[4])/h):i[0]>i[5]&&i[0]>i[10]?(h=2*Math.sqrt(1+i[0]-i[5]-i[10]),t[3]=(i[6]-i[9])/h,t[0]=.25*h,t[1]=(i[1]+i[4])/h,t[2]=(i[8]+i[2])/h):i[5]>i[10]?(h=2*Math.sqrt(1+i[5]-i[0]-i[10]),t[3]=(i[8]-i[2])/h,t[0]=(i[1]+i[4])/h,t[1]=.25*h,t[2]=(i[6]+i[9])/h):(h=2*Math.sqrt(1+i[10]-i[0]-i[5]),t[3]=(i[1]-i[4])/h,t[0]=(i[8]+i[2])/h,t[1]=(i[6]+i[9])/h,t[2]=.25*h)}(t,this),this}Wt(t){var i,s;return s=this,(i=t)[0]=s[12],i[1]=s[13],i[2]=s[14],this}kt(t){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[4],n=i[5],a=i[6],o=i[8],u=i[9],c=i[10];t[0]=Math.sqrt(s*s+h*h+e*e),t[1]=Math.sqrt(r*r+n*n+a*a),t[2]=Math.sqrt(o*o+u*u+c*c)}(t,this),this}Qt(){return function(t){let i=t[0],s=t[1],h=t[2],e=t[4],r=t[5],n=t[6],a=t[8],o=t[9],u=t[10];const c=i*i+s*s+h*h,l=e*e+r*r+n*n,f=a*a+o*o+u*u;return Math.sqrt(Math.max(c,l,f))}(this)}Ht(t,i,s){return function(t,i,s,h){let e=i[0],r=i[1],n=i[2],a=h[0],o=h[1],u=h[2],c=e-s[0],l=r-s[1],f=n-s[2],d=c*c+l*l+f*f;d>0&&(c*=d=1/Math.sqrt(d),l*=d,f*=d);let p=o*f-u*l,m=u*c-a*f,w=a*l-o*c;(d=p*p+m*m+w*w)>0&&(p*=d=1/Math.sqrt(d),m*=d,w*=d),t[0]=p,t[1]=m,t[2]=w,t[3]=0,t[4]=l*w-f*m,t[5]=f*p-c*w,t[6]=c*m-l*p,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=e,t[13]=r,t[14]=n,t[15]=1}(this,t,i,s),this}Jt(){return function(t){let i=t[0],s=t[1],h=t[2],e=t[3],r=t[4],n=t[5],a=t[6],o=t[7],u=t[8],c=t[9],l=t[10],f=t[11],d=t[12],p=t[13],m=t[14],w=t[15];return(i*n-s*r)*(l*w-f*m)-(i*a-h*r)*(c*w-f*p)+(i*o-e*r)*(c*m-l*p)+(s*a-h*n)*(u*w-f*d)-(s*o-e*n)*(u*m-l*d)+(h*o-e*a)*(u*p-c*d)}(this)}}const Z=new g;class B{constructor({canvas:t=document.createElement("canvas"),width:i=300,height:s=150,Kt:h=1,alpha:e=!1,ti:r=!0,ii:n=!1,si:a=!1,ft:o=!1,hi:u=!1,ei:c="default",ri:l=!0,ni:f=2}={}){const d={alpha:e,ti:r,ii:n,si:a,ft:o,hi:u,ei:c};this.Kt=h,this.alpha=e,this.color=!0,this.ti=r,this.ii=n,this.ft=o,this.ri=l,2===f&&(this.S=t.getContext("webgl2",d)),this.ai=!!this.S,this.S||(this.S=t.getContext("webgl",d)||t.getContext("experimental-webgl",d)),this.S.N=this,this.oi(i,s),this.ui={},this.ui.ci=this.S.getParameter(this.S.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.state={},this.state.blendFunc={src:this.S.ONE,yt:this.S.ZERO},this.state.blendEquation={Ft:this.S.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.S.CCW,this.state.depthMask=!0,this.state.depthFunc=this.S.LESS,this.state.li=!1,this.state.flipY=!1,this.state.fi=null,this.state.viewport={width:null,height:null},this.state.di=[],this.state.pi=0,this.state.I=null,this.state.pt=new Map,this.extensions={},this.ai?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture")),this.k=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.tt=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.K=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.R=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.j=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.rt=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES")}oi(t,i){this.width=t,this.height=i,this.S.canvas.width=t*this.Kt,this.S.canvas.height=i*this.Kt,Object.assign(this.S.canvas.style,{width:t+"px",height:i+"px"})}mi(t,i){this.state.viewport.width===t&&this.state.viewport.height===i||(this.state.viewport.width=t,this.state.viewport.height=i,this.S.viewport(0,0,t,i))}enable(t){!0!==this.state[t]&&(this.S.enable(t),this.state[t]=!0)}disable(t){!1!==this.state[t]&&(this.S.disable(t),this.state[t]=!1)}dt(t,i,s,h){this.state.blendFunc.src===t&&this.state.blendFunc.yt===i&&this.state.blendFunc.At===s&&this.state.blendFunc.bt===h||(this.state.blendFunc.src=t,this.state.blendFunc.yt=i,this.state.blendFunc.At=s,this.state.blendFunc.bt=h,void 0!==s?this.S.blendFuncSeparate(t,i,s,h):this.S.blendFunc(t,i))}_t(t,i){this.state.blendEquation.Ft===t&&this.state.blendEquation.zt===i||(this.state.blendEquation.Ft=t,this.state.blendEquation.zt=i,void 0!==i?this.S.blendEquationSeparate(t,i):this.S.blendEquation(t))}St(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.S.cullFace(t))}Ot(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.S.frontFace(t))}Xt(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.S.depthMask(t))}jt(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.S.depthFunc(t))}activeTexture(t){this.state.pi!==t&&(this.state.pi=t,this.S.activeTexture(this.S.TEXTURE0+t))}bindFramebuffer({target:t=this.S.FRAMEBUFFER,buffer:i=null}={}){this.state.fi!==i&&(this.state.fi=i,this.S.bindFramebuffer(t,i))}getExtension(t,i,s){return i&&this.S[i]?this.S[i].bind(this.S):(this.extensions[t]||(this.extensions[t]=this.S.getExtension(t)),i?this.extensions[t][s].bind(this.extensions[t]):this.extensions[t])}wi(t,i){return t.Mi!==i.Mi?t.Mi-i.Mi:t.H.id!==i.H.id?t.H.id-i.H.id:t.vi!==i.vi?t.vi-i.vi:i.id-t.id}gi(t,i){return t.Mi!==i.Mi?t.Mi-i.Mi:t.vi!==i.vi?i.vi-t.vi:i.id-t.id}xi(t,i){return t.Mi!==i.Mi?t.Mi-i.Mi:t.H.id!==i.H.id?t.H.id-i.H.id:i.id-t.id}yi({Ai:t,bi:i,_i:s,sort:h}){let e=[];if(i&&s&&i.Fi(),t.zi(t=>{if(!t.visible)return!0;t.draw&&(s&&t.Ei&&i&&!i.Si(t)||e.push(t))}),h){const t=[],s=[],h=[];e.forEach(e=>{e.H.ut?e.H.ct?s.push(e):h.push(e):t.push(e),e.vi=0,0===e.Mi&&e.H.ct&&i&&(e.Oi.Wt(Z),Z.v(i.Xi),e.vi=Z.z)}),t.sort(this.wi),s.sort(this.gi),h.sort(this.xi),e=t.concat(s,h)}return e}ji({Ai:t,bi:i,target:s=null,update:h=!0,sort:e=!0,_i:r=!0,clear:n}){null===s?(this.bindFramebuffer(),this.mi(this.width*this.Kt,this.height*this.Kt)):(this.bindFramebuffer(s),this.mi(s.width,s.height)),(n||this.ri&&!1!==n)&&(!this.ti||s&&s.ti||(this.enable(this.S.DEPTH_TEST),this.Xt(!0)),this.S.clear((this.color?this.S.COLOR_BUFFER_BIT:0)|(this.ti?this.S.DEPTH_BUFFER_BIT:0)|(this.ii?this.S.STENCIL_BUFFER_BIT:0))),h&&t.Ni(),i&&null===i.parent&&i.Ni(),this.yi({Ai:t,bi:i,_i:r,sort:e}).forEach(t=>{t.draw({bi:i})})}}function V(t,i,s,h,e){return t[0]=i,t[1]=s,t[2]=h,t[3]=e,t}function C(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=s*s+h*h+e*e+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=s*n,t[1]=h*n,t[2]=e*n,t[3]=r*n,t}function q(t,i,s){let h=i[0],e=i[1],r=i[2],n=i[3],a=s[0],o=s[1],u=s[2],c=s[3];return t[0]=h*c+n*a+e*u-r*o,t[1]=e*c+n*o+r*a-h*u,t[2]=r*c+n*u+h*o-e*a,t[3]=n*c-h*a-e*o-r*u,t}function D(t,i,s,h){let e,r,n,a,o,u=i[0],c=i[1],l=i[2],f=i[3],d=s[0],p=s[1],m=s[2],w=s[3];return(r=u*d+c*p+l*m+f*w)<0&&(r=-r,d=-d,p=-p,m=-m,w=-w),1-r>1e-6?(e=Math.acos(r),n=Math.sin(e),a=Math.sin((1-h)*e)/n,o=Math.sin(h*e)/n):(a=1-h,o=h),t[0]=a*u+o*d,t[1]=a*c+o*p,t[2]=a*l+o*m,t[3]=a*f+o*w,t}function I(t,i){let s,h=i[0]+i[4]+i[8];if(h>0)s=Math.sqrt(h+1),t[3]=.5*s,s=.5/s,t[0]=(i[5]-i[7])*s,t[1]=(i[6]-i[2])*s,t[2]=(i[1]-i[3])*s;else{let h=0;i[4]>i[0]&&(h=1),i[8]>i[3*h+h]&&(h=2);let e=(h+1)%3,r=(h+2)%3;s=Math.sqrt(i[3*h+h]-i[3*e+e]-i[3*r+r]+1),t[h]=.5*s,s=.5/s,t[3]=(i[3*e+r]-i[3*r+e])*s,t[e]=(i[3*e+h]+i[3*h+e])*s,t[r]=(i[3*r+h]+i[3*h+r])*s}return t}const L=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},P=V,$=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]},G=C;(function(){const t=[0,0,0],i=[1,0,0],s=[0,1,0]})(),function(){let t=[0,0,0,1],i=[0,0,0,1]}(),function(){const t=[1,0,0,0,1,0,0,0,1]}();class U extends Array{constructor(t=0,i=0,s=0,h=1){return super(t,i,s,h),this.Yi=()=>{},this}get x(){return this[0]}set x(t){this[0]=t,this.Yi()}get y(){return this[1]}set y(t){this[1]=t,this.Yi()}get z(){return this[2]}set z(t){this[2]=t,this.Yi()}get w(){return this[3]}set w(t){this[3]=t,this.Yi()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.Yi(),this}set(t,i,s,h){return P(this,t,i,s,h),this.Yi(),this}Ct(t){return function(t,i,s){s*=.5;let h=i[0],e=i[1],r=i[2],n=i[3],a=Math.sin(s),o=Math.cos(s);t[0]=h*o+n*a,t[1]=e*o+r*a,t[2]=r*o-e*a,t[3]=n*o-h*a}(this,this,t),this.Yi(),this}qt(t){return function(t,i,s){s*=.5;let h=i[0],e=i[1],r=i[2],n=i[3],a=Math.sin(s),o=Math.cos(s);t[0]=h*o-r*a,t[1]=e*o+n*a,t[2]=r*o+h*a,t[3]=n*o-e*a}(this,this,t),this.Yi(),this}Dt(t){return function(t,i,s){s*=.5;let h=i[0],e=i[1],r=i[2],n=i[3],a=Math.sin(s),o=Math.cos(s);t[0]=h*o+e*a,t[1]=e*o-h*a,t[2]=r*o+n*a,t[3]=n*o-r*a}(this,this,t),this.Yi(),this}inverse(t=this){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=s*s+h*h+e*e+r*r,a=n?1/n:0;t[0]=-s*a,t[1]=-h*a,t[2]=-e*a,t[3]=r*a}(this,t),this.Yi(),this}Zi(t=this){var i,s;return s=t,(i=this)[0]=-s[0],i[1]=-s[1],i[2]=-s[2],i[3]=s[3],this.Yi(),this}t(t){return L(this,t),this.Yi(),this}normalize(t=this){return G(this,t),this.Yi(),this}multiply(t,i){return i?q(this,t,i):q(this,this,t),this.Yi(),this}m(t){return $(this,t)}Bi(t){return I(this,t),this.Yi(),this}Vi(t){return function(t,i,s="YXZ"){let h=Math.sin(.5*i[0]),e=Math.cos(.5*i[0]),r=Math.sin(.5*i[1]),n=Math.cos(.5*i[1]),a=Math.sin(.5*i[2]),o=Math.cos(.5*i[2]);"XYZ"===s?(t[0]=h*n*o+e*r*a,t[1]=e*r*o-h*n*a,t[2]=e*n*a+h*r*o,t[3]=e*n*o-h*r*a):"YXZ"===s?(t[0]=h*n*o+e*r*a,t[1]=e*r*o-h*n*a,t[2]=e*n*a-h*r*o,t[3]=e*n*o+h*r*a):"ZXY"===s?(t[0]=h*n*o-e*r*a,t[1]=e*r*o+h*n*a,t[2]=e*n*a+h*r*o,t[3]=e*n*o-h*r*a):"ZYX"===s?(t[0]=h*n*o-e*r*a,t[1]=e*r*o+h*n*a,t[2]=e*n*a-h*r*o,t[3]=e*n*o+h*r*a):"YZX"===s?(t[0]=h*n*o+e*r*a,t[1]=e*r*o+h*n*a,t[2]=e*n*a-h*r*o,t[3]=e*n*o-h*r*a):"XZY"===s&&(t[0]=h*n*o-e*r*a,t[1]=e*r*o-h*n*a,t[2]=e*n*a+h*r*o,t[3]=e*n*o+h*r*a)}(this,t,t.order),this}Ci(t,i){return D(this,this,t,i),this}_(t,i=0){return this[0]=t[i],this[1]=t[i+1],this[2]=t[i+2],this[3]=t[i+3],this}toArray(t=[],i=0){return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t[i+3]=this[3],t}}const R=new Y;class T extends Array{constructor(t=0,i=t,s=t,h="YXZ"){return super(t,i,s),this.order=h,this.Yi=()=>{},this}get x(){return this[0]}set x(t){this[0]=t,this.Yi()}get y(){return this[1]}set y(t){this[1]=t,this.Yi()}get z(){return this[2]}set z(t){this[2]=t,this.Yi()}set(t,i=t,s=t){return this[0]=t,this[1]=i,this[2]=s,this.Yi(),this}qi(t){return this.order=t,this.Yi(),this}Di(t,i=this.order){return function(t,i,s="YXZ"){"XYZ"===s?(t[1]=Math.asin(Math.min(Math.max(i[8],-1),1)),Math.abs(i[8])<.99999?(t[0]=Math.atan2(-i[9],i[10]),t[2]=Math.atan2(-i[4],i[0])):(t[0]=Math.atan2(i[6],i[5]),t[2]=0)):"YXZ"===s?(t[0]=Math.asin(-Math.min(Math.max(i[9],-1),1)),Math.abs(i[9])<.99999?(t[1]=Math.atan2(i[8],i[10]),t[2]=Math.atan2(i[1],i[5])):(t[1]=Math.atan2(-i[2],i[0]),t[2]=0)):"ZXY"===s?(t[0]=Math.asin(Math.min(Math.max(i[6],-1),1)),Math.abs(i[6])<.99999?(t[1]=Math.atan2(-i[2],i[10]),t[2]=Math.atan2(-i[4],i[5])):(t[1]=0,t[2]=Math.atan2(i[1],i[0]))):"ZYX"===s?(t[1]=Math.asin(-Math.min(Math.max(i[2],-1),1)),Math.abs(i[2])<.99999?(t[0]=Math.atan2(i[6],i[10]),t[2]=Math.atan2(i[1],i[0])):(t[0]=0,t[2]=Math.atan2(-i[4],i[5]))):"YZX"===s?(t[2]=Math.asin(Math.min(Math.max(i[1],-1),1)),Math.abs(i[1])<.99999?(t[0]=Math.atan2(-i[9],i[5]),t[1]=Math.atan2(-i[2],i[0])):(t[0]=0,t[1]=Math.atan2(i[8],i[10]))):"XZY"===s&&(t[2]=Math.asin(-Math.min(Math.max(i[4],-1),1)),Math.abs(i[4])<.99999?(t[0]=Math.atan2(i[6],i[5]),t[1]=Math.atan2(i[8],i[0])):(t[0]=Math.atan2(-i[9],i[10]),t[1]=0))}(this,t,i),this}Ut(t,i=this.order){return R.Ut(t),this.Di(R,i)}}class W{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Y,this.Oi=new Y,this.Ii=!0,this.position=new g,this.Li=new U,this.scale=new g(1),this.rotation=new T,this.Pi=new g(0,1,0),this.rotation.Yi=()=>this.Li.Vi(this.rotation),this.Li.Yi=()=>this.rotation.Ut(this.Li)}$i(t,i=!0){i&&this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,i&&t&&t.Gi(this,!1)}Gi(t,i=!0){~this.children.indexOf(t)||this.children.push(t),i&&t.$i(this,!1)}removeChild(t,i=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),i&&t.$i(null,!1)}Ni(t){this.Ii&&this.Ui(),(this.Ri||t)&&(null===this.parent?this.Oi.t(this.matrix):this.Oi.multiply(this.parent.Oi,this.matrix),this.Ri=!1,t=!0);for(let i=0,s=this.children.length;i<s;i++)this.children[i].Ni(t)}Ui(){this.matrix.Rt(this.Li,this.position,this.scale),this.Ri=!0}zi(t){if(!t(this))for(let i=0,s=this.children.length;i<s;i++)this.children[i].zi(t)}Ti(){this.matrix.Wt(this.position),this.matrix.Tt(this.Li),this.matrix.kt(this.scale),this.rotation.Ut(this.Li)}Ht(t,i=!1){i?this.matrix.Ht(this.position,t,this.Pi):this.matrix.Ht(t,this.position,this.Pi),this.matrix.Tt(this.Li),this.rotation.Ut(this.Li)}}const k=new Y,Q=new g,H=new g;class J extends W{constructor(t,{near:i=.1,$t:s=100,Lt:h=45,Pt:e=1,left:r,right:n,bottom:a,top:o}={}){super(t),this.near=i,this.$t=s,this.Lt=h,this.Pt=e,this.projectionMatrix=new Y,this.Wi=new Y,this.Xi=new Y,r||n?this.ki({left:r,right:n,bottom:a,top:o}):this.perspective()}perspective({near:t=this.near,$t:i=this.$t,Lt:s=this.Lt,Pt:h=this.Pt}={}){return this.projectionMatrix.It({Lt:s*(Math.PI/180),Pt:h,near:t,$t:i}),this.type="perspective",this}ki({near:t=this.near,$t:i=this.$t,left:s=-1,right:h=1,bottom:e=-1,top:r=1}={}){return this.projectionMatrix.Gt({left:s,right:h,bottom:e,top:r,near:t,$t:i}),this.type="orthographic",this}Ni(){return super.Ni(),this.Wi.inverse(this.Oi),this.Xi.multiply(this.projectionMatrix,this.Wi),this}Ht(t){return super.Ht(t,!0),this}Qi(t){return t.v(this.Wi),t.v(this.projectionMatrix),this}Hi(t){return t.v(k.inverse(this.projectionMatrix)),t.v(this.Oi),this}Fi(){this.Ji||(this.Ji=[new g,new g,new g,new g,new g,new g]);const t=this.Xi;this.Ji[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).Ki=t[15]-t[12],this.Ji[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).Ki=t[15]+t[12],this.Ji[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).Ki=t[15]+t[13],this.Ji[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).Ki=t[15]-t[13],this.Ji[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).Ki=t[15]-t[14],this.Ji[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).Ki=t[15]+t[14];for(let t=0;t<6;t++){const i=1/this.Ji[t].h();this.Ji[t].multiply(i),this.Ji[t].Ki*=i}}Si(t){t.ts.bounds&&t.ts.bounds.ht!==1/0||t.ts.et();const i=Q;i.t(t.ts.bounds.st),i.v(t.Oi);const s=t.ts.bounds.ht*t.Oi.Qt();return this.ss(i,s)}ss(t,i){const s=H;for(let h=0;h<6;h++){const e=this.Ji[h];if(s.t(e).m(t)+e.Ki<-i)return!1}return!0}}function K(t,i,s){let h=i[0],e=i[1],r=i[2],n=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=s[0],d=s[1],p=s[2],m=s[3],w=s[4],M=s[5],v=s[6],g=s[7],x=s[8];return t[0]=f*h+d*n+p*u,t[1]=f*e+d*a+p*c,t[2]=f*r+d*o+p*l,t[3]=m*h+w*n+M*u,t[4]=m*e+w*a+M*c,t[5]=m*r+w*o+M*l,t[6]=v*h+g*n+x*u,t[7]=v*e+g*a+x*c,t[8]=v*r+g*o+x*l,t}class tt extends Array{constructor(t=1,i=0,s=0,h=0,e=1,r=0,n=0,a=0,o=1){return super(t,i,s,h,e,r,n,a,o),this}set(t,i,s,h,e,r,n,a,o){return function(t,i,s,h,e,r,n,a,o,u){t[0]=i,t[1]=s,t[2]=h,t[3]=e,t[4]=r,t[5]=n,t[6]=a,t[7]=o,t[8]=u}(this,t,i,s,h,e,r,n,a,o),this}translate(t,i=this){return function(t,i,s){let h=i[0],e=i[1],r=i[2],n=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=s[0],d=s[1];t[0]=h,t[1]=e,t[2]=r,t[3]=n,t[4]=a,t[5]=o,t[6]=f*h+d*n+u,t[7]=f*e+d*a+c,t[8]=f*r+d*o+l}(this,i,t),this}rotate(t,i=this){return function(t,i,s){let h=i[0],e=i[1],r=i[2],n=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=Math.sin(s),d=Math.cos(s);t[0]=d*h+f*n,t[1]=d*e+f*a,t[2]=d*r+f*o,t[3]=d*n-f*h,t[4]=d*a-f*e,t[5]=d*o-f*r,t[6]=u,t[7]=c,t[8]=l}(this,i,t),this}scale(t,i=this){return function(t,i,s){let h=s[0],e=s[1];t[0]=h*i[0],t[1]=h*i[1],t[2]=h*i[2],t[3]=e*i[3],t[4]=e*i[4],t[5]=e*i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8]}(this,i,t),this}multiply(t,i){return i?K(this,t,i):K(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}t(t){var i,s;return s=t,(i=this)[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],this}hs(t){var i,s;return s=t,(i=this)[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[4],i[4]=s[5],i[5]=s[6],i[6]=s[8],i[7]=s[9],i[8]=s[10],this}Ut(t){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=s+s,a=h+h,o=e+e,u=s*n,c=h*n,l=h*a,f=e*n,d=e*a,p=e*o,m=r*n,w=r*a,M=r*o;t[0]=1-l-p,t[3]=c-M,t[6]=f+w,t[1]=c+M,t[4]=1-u-p,t[7]=d-m,t[2]=f-w,t[5]=d+m,t[8]=1-u-l}(this,t),this}es(t,i,s){return this.set(t[0],t[1],t[2],i[0],i[1],i[2],s[0],s[1],s[2]),this}inverse(t=this){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=i[4],a=i[5],o=i[6],u=i[7],c=i[8],l=c*n-a*u,f=-c*r+a*o,d=u*r-n*o,p=s*l+h*f+e*d;p&&(p=1/p,t[0]=l*p,t[1]=(-c*h+e*u)*p,t[2]=(a*h-e*n)*p,t[3]=f*p,t[4]=(c*s-e*o)*p,t[5]=(-a*s+e*r)*p,t[6]=d*p,t[7]=(-u*s+h*o)*p,t[8]=(n*s-h*r)*p)}(this,t),this}rs(t){return function(t,i){let s=i[0],h=i[1],e=i[2],r=i[3],n=i[4],a=i[5],o=i[6],u=i[7],c=i[8],l=i[9],f=i[10],d=i[11],p=i[12],m=i[13],w=i[14],M=i[15],v=s*a-h*n,g=s*o-e*n,x=s*u-r*n,y=h*o-e*a,A=h*u-r*a,b=e*u-r*o,_=c*m-l*p,F=c*w-f*p,z=c*M-d*p,E=l*w-f*m,S=l*M-d*m,O=f*M-d*w,X=v*O-g*S+x*E+y*z-A*F+b*_;X&&(X=1/X,t[0]=(a*O-o*S+u*E)*X,t[1]=(o*z-n*O-u*F)*X,t[2]=(n*S-a*z+u*_)*X,t[3]=(e*S-h*O-r*E)*X,t[4]=(s*O-e*z+r*F)*X,t[5]=(h*z-s*S-r*_)*X,t[6]=(m*b-w*A+M*y)*X,t[7]=(w*x-p*b-M*g)*X,t[8]=(p*A-m*x+M*v)*X)}(this,t),this}}let it=0;class st extends W{constructor(t,{ts:i,H:s,mode:h=t.TRIANGLES,Ei:e=!0,Mi:r=0}={}){super(t),this.S=t,this.id=it++,this.ts=i,this.H=s,this.mode=h,this.Ei=e,this.Mi=r,this.modelViewMatrix=new Y,this.normalMatrix=new tt,this.H.ot.ns||Object.assign(this.H.ot,{ns:{value:null},Wi:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},as:{value:null}})}draw({bi:t}={}){this.os&&this.os({us:this,bi:t}),t&&(this.H.ot.projectionMatrix.value=t.projectionMatrix,this.H.ot.as.value=t.position,this.H.ot.Wi.value=t.Wi,this.modelViewMatrix.multiply(t.Wi,this.Oi),this.normalMatrix.rs(this.modelViewMatrix),this.H.ot.ns.value=this.Oi,this.H.ot.modelViewMatrix.value=this.modelViewMatrix,this.H.ot.normalMatrix.value=this.normalMatrix);let i=this.H.cullFace&&this.Oi.Jt()<0;const s=this.S.N.Bt===this.H.id,h=this.S.N.Y===this.ts.id;this.H.Nt({Yt:s,Zt:i}),this.ts.draw({mode:this.mode,H:this.H,J:h}),this.cs&&this.cs({us:this,bi:t})}}new Uint8Array(4);function ht(t,i,s){return t[0]=i[0]+s[0],t[1]=i[1]+s[1],t}function et(t,i,s){return t[0]=i[0]-s[0],t[1]=i[1]-s[1],t}function rt(t,i,s){return t[0]=i[0]*s,t[1]=i[1]*s,t}function nt(t){var i=t[0],s=t[1];return Math.sqrt(i*i+s*s)}class at extends Array{constructor(t=0,i=t){return super(t,i),this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}set(t,i=t){return function(t,i,s){t[0]=i,t[1]=s}(this,t,i),this}t(t){var i,s;return s=t,(i=this)[0]=s[0],i[1]=s[1],this}add(t,i){return i?ht(this,t,i):ht(this,this,t),this}sub(t,i){return i?et(this,t,i):et(this,this,t),this}multiply(t){var i,s,h;return t.length?(s=this,h=t,(i=this)[0]=s[0]*h[0],i[1]=s[1]*h[1]):rt(this,this,t),this}i(t){var i,s,h;return t.length?(s=this,h=t,(i=this)[0]=s[0]/h[0],i[1]=s[1]/h[1]):rt(this,this,1/t),this}inverse(t=this){var i,s;return s=t,(i=this)[0]=1/s[0],i[1]=1/s[1],this}s(){return nt(this)}h(t){return t?(i=this,h=(s=t)[0]-i[0],e=s[1]-i[1],Math.sqrt(h*h+e*e)):nt(this);var i,s,h,e}o(){return this.u()}u(t){return t?(i=this,h=(s=t)[0]-i[0],e=s[1]-i[1],h*h+e*e):function(t){var i=t[0],s=t[1];return i*i+s*s}(this);var i,s,h,e}l(t=this){var i,s;return s=t,(i=this)[0]=-s[0],i[1]=-s[1],this}p(t,i){return h=i,(s=t)[0]*h[1]-s[1]*h[0];var s,h}scale(t){return rt(this,this,t),this}normalize(){var t,i,s,h,e;return t=this,s=(i=this)[0],h=i[1],(e=s*s+h*h)>0&&(e=1/Math.sqrt(e)),t[0]=i[0]*e,t[1]=i[1]*e,this}m(t){return s=t,(i=this)[0]*s[0]+i[1]*s[1];var i,s}M(t){return s=t,(i=this)[0]===s[0]&&i[1]===s[1];var i,s}ls(t){var i,s,h,e,r;return i=this,h=t,e=(s=this)[0],r=s[1],i[0]=h[0]*e+h[3]*r+h[6],i[1]=h[1]*e+h[4]*r+h[7],this}v(t){return function(t,i,s){let h=i[0],e=i[1];t[0]=s[0]*h+s[4]*e+s[12],t[1]=s[1]*h+s[5]*e+s[13]}(this,this,t),this}A(t,i){!function(t,i,s,h){var e=i[0],r=i[1];t[0]=e+h*(s[0]-e),t[1]=r+h*(s[1]-r)}(this,this,t,i)}clone(){return new at(this[0],this[1])}_(t,i=0){return this[0]=t[i],this[1]=t[i+1],this}toArray(t=[],i=0){return t[i]=this[0],t[i+1]=this[1],t}}class ot extends b{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.width,h=void 0===s?1:s,e=i.height,r=void 0===e?1:e,n=i.attributes,a=void 0===n?{}:n,o=i.fs,u=void 0===o?null:o;if(!u)throw new Error("need positions");const c=4*u.length,l=6*u.length,f=new Float32Array(3*c),d=new Float32Array(3*c),p=new Float32Array(2*c),m=c>65536?new Uint32Array(l):new Uint16Array(l);let w=0,M=0;for(let t of u)ot.ds(f,d,p,m,h,r,0,2,1,w,M,...t),w+=4,M+=1;Object.assign(a,{position:{size:3,data:f},normal:{size:3,data:d},ps:{size:2,data:p},index:{data:m}}),super(t,a)}static ds(t,i,s,h,e,r){let n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:2,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0;const p=u;for(let m=0;m<=1;m++){let w=m*r-r/2-f;for(let r=0;r<=1;r++,u++){let f=r*e-e/2-l;if(t[3*u+n]=-f,t[3*u+a]=-w,t[3*u+o]=d,i[3*u+n]=0,i[3*u+a]=0,i[3*u+o]=1,s[2*u]=r,s[2*u+1]=1-m,1===m||1===r)continue;let M=p+r+2*m,v=p+r+2*(m+1),g=p+r+2*(m+1)+1,x=p+r+2*m+1;h[6*c]=M,h[6*c+1]=v,h[6*c+2]=x,h[6*c+3]=v,h[6*c+4]=g,h[6*c+5]=x,c++}}}}var ut=ot;class ct extends b{constructor(t,{width:i=1,height:s=1,ms:h=1,ws:e=1,attributes:r={}}={}){const n=h,a=e,o=(n+1)*(a+1),u=n*a*6,c=new Float32Array(3*o),l=new Float32Array(3*o),f=new Float32Array(2*o),d=o>65536?new Uint32Array(u):new Uint16Array(u);ct.ds(c,l,f,d,i,s,0,n,a),Object.assign(r,{position:{size:3,data:c},normal:{size:3,data:l},ps:{size:2,data:f},index:{data:d}}),super(t,r)}static ds(t,i,s,h,e,r,n,a,o,u=0,c=1,l=2,f=1,d=-1,p=0,m=0){const w=p,M=e/a,v=r/o;for(let g=0;g<=o;g++){let x=g*v-r/2;for(let r=0;r<=a;r++,p++){let v=r*M-e/2;if(t[3*p+u]=v*f,t[3*p+c]=x*d,t[3*p+l]=n/2,i[3*p+u]=0,i[3*p+c]=0,i[3*p+l]=n>=0?1:-1,s[2*p]=r/a,s[2*p+1]=1-g/o,g===o||r===a)continue;let y=w+r+g*(a+1),A=w+r+(g+1)*(a+1),b=w+r+(g+1)*(a+1)+1,_=w+r+g*(a+1)+1;h[6*m]=y,h[6*m+1]=A,h[6*m+2]=_,h[6*m+3]=A,h[6*m+4]=b,h[6*m+5]=_,m++}}}}class lt extends b{constructor(t,{width:i=1,height:s=1,ti:h=1,ms:e=1,ws:r=1,Ms:n=1,attributes:a={}}={}){const o=e,u=r,c=n,l=(o+1)*(u+1)*2+(o+1)*(c+1)*2+(u+1)*(c+1)*2,f=6*(o*u*2+o*c*2+u*c*2),d=new Float32Array(3*l),p=new Float32Array(3*l),m=new Float32Array(2*l),w=l>65536?new Uint32Array(f):new Uint16Array(f);let M=0,v=0;ct.ds(d,p,m,w,h,s,i,c,u,2,1,0,-1,-1,M,v),ct.ds(d,p,m,w,h,s,-i,c,u,2,1,0,1,-1,M+=(c+1)*(u+1),v+=c*u),ct.ds(d,p,m,w,i,h,s,c,u,0,2,1,1,1,M+=(c+1)*(u+1),v+=c*u),ct.ds(d,p,m,w,i,h,-s,c,u,0,2,1,1,-1,M+=(o+1)*(c+1),v+=o*c),ct.ds(d,p,m,w,i,s,-h,o,u,0,1,2,-1,-1,M+=(o+1)*(c+1),v+=o*c),ct.ds(d,p,m,w,i,s,h,o,u,0,1,2,1,-1,M+=(o+1)*(u+1),v+=o*u),Object.assign(a,{position:{size:3,data:d},normal:{size:3,data:p},ps:{size:2,data:m},index:{data:w}}),super(t,a)}}new g,new at,new at;new g,new g,new g,new Y;new g,new U,new g,new g,new U,new g;new Y;var ft=
/*! ContributeForest v0.0.1 | Yukimasa Funaoka <yukimasafunaoka@gmail.com> */
class{constructor(t){Object.assign(this,{vs:document.body,gs:800,xs:350,ys:5.5,As:1.8,bs:.25},t),this.w=this.gs,this._s=this.xs,this.Fs=this.xs/this.gs,this.animate=this.animate.bind(this),this.zs=this.zs.bind(this),this.Es=this.As+this.bs,this.frame=0,this.Ss=0;for(let t=0;t<this.data.length;t++)for(let i=0;i<this.data[t].length;i++){const s=this.data[t][i].count-0;this.Ss<s&&(this.Ss=s)}this.Os(),this.Xs(),this.zs(),window.addEventListener("resize",this.zs)}zs(){this.w=Math.min(window.innerWidth,this.gs),this._s=this.w*this.Fs,this.N.Kt=Math.max(window.devicePixelRatio,2),this.N.oi(this.w,this._s),this.bi.perspective({Pt:this.S.canvas.width/this.S.canvas.height}),this.N.ji({Ai:this.Ai,bi:this.bi})}Os(){this.N=new B({si:!0}),this.S=this.N.S,document.getElementById("forest-view").appendChild(this.S.canvas),this.S.clearColor(1,1,1,1),this.Ai=new W,this.bi=new J(this.S,{Lt:30,$t:1e3}),this.bi.position.set(0,0,100),this.bi.Ht([0,0,0]),window.bi=this.bi}Xs(){const t=this.data.length;this.js=[];const i=new lt(this.S,{width:this.As,ti:this.As,height:this.ys}),s=new z(this.S,{nt:n,at:a()}),h=new z(this.S,{nt:o,at:u,ot:{color:{value:null}}}),e=[];this.data.forEach((s,n)=>{this.js[n]=[];const a=0+(n-t/2-2)*this.Es;s.forEach((s,o)=>{const u=o*this.Es;let c=this.data[n][o].count/this.Ss*.2;const l=new g(...r(360/t*n,.7,.65-c)),f=new st(this.S,{ts:i,H:h});f.position.set(a,8.25,u),f.os=function(){h.ot.color.value=l},f.$i(this.Ai),this.js[n][o]=f,e.push([a,u])})});const c=new ut(this.S,{width:this.As,height:this.As,fs:e});new st(this.S,{ts:c,H:s}).$i(this.Ai),this.Ai.rotation.x=.32,this.Ai.rotation.y=-.64,this.Ai.rotation.z=-.22,this.N.ji({Ai:this.Ai,bi:this.bi})}animate(){this.frame++;const t=this.js.length+20;this.frame<t&&requestAnimationFrame(this.animate);for(let t=0;t<this.js.length;t++)for(let s=0;s<this.js[t].length;s++){const h=this.js[t][s],e=this.data[t][s];let r=0;this.frame>=t&&(i=(this.frame-t)/20,r=(i-=1)*i*(2.7*i+1.7)+1,this.frame-t>=20&&(r=1)),r*=(e.count-0)/this.Ss*3,h.position.set(h.position.x,this.ys*r/2,h.position.z),r&&(h.scale.y=r),h.visible=!!r}var i;const s=this.frame/t;this.Ai.rotation.x=.32+.18*h(s),this.Ai.rotation.y=.2*h(s)-.64,this.N.ji({Ai:this.Ai,bi:this.bi})}};s.d(i,"draw",function(){return dt});const dt=function(t){const i=document.getElementById("forest-view");i.className="loaded",new ft({data:t,vs:i}).animate(),function(t){const i=document.getElementById("forest-view__contributions__count"),s=t.flat(1).reduce((t,i)=>t+i.count,0),e=t.length+13,r=new Intl.NumberFormat;let n=0;!function t(){++n<e&&requestAnimationFrame(t),n%2||(i.textContent=r.format(s*h(n/e)|0))}()}(t)}}]]);