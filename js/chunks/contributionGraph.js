(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(t,i){!function(){"use strict";var t={};function i(i,s){var n;t[i]=!0,void 0!==s&&(n=s,window.console&&window.console.error&&window.console.error(n))}var s=function t(i){var s=i.t;this.i=i,this.s=!0,this.h=!1,this.o=null,this.u=new Array(i.v);for(var n=0;n<this.u.length;n++){var r=new t.l(s);this.u[n]=r}this.m=0};(s.l=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=t.FLOAT,this.M=!1,this._=16,this.offset=0,this.g="",this.p()}).prototype.p=function(){this.g=[this.size,this.type,this.M,this._,this.offset].join(":")};var n=function(i){var s=this;this.t=i,function(i){var s=i.getError;i.getError=function(){do{(n=s.apply(i))!=i.NO_ERROR&&(t[n]=!0)}while(n!=i.NO_ERROR);for(var n in t)if(t[n])return delete t[n],parseInt(n);return i.NO_ERROR}}(i);var n=this.A={getParameter:i.getParameter,enableVertexAttribArray:i.enableVertexAttribArray,disableVertexAttribArray:i.disableVertexAttribArray,bindBuffer:i.bindBuffer,getVertexAttrib:i.getVertexAttrib,vertexAttribPointer:i.vertexAttribPointer};i.getParameter=function(t){return t==s.VERTEX_ARRAY_BINDING_OES?s.O==s.j?null:s.O:n.getParameter.apply(this,arguments)},i.enableVertexAttribArray=function(t){var i=s.O;i.m=Math.max(i.m,t);var r=i.u[t];return r.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},i.disableVertexAttribArray=function(t){var i=s.O;i.m=Math.max(i.m,t);var r=i.u[t];return r.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},i.bindBuffer=function(t,r){switch(t){case i.ARRAY_BUFFER:s.S=r;break;case i.ELEMENT_ARRAY_BUFFER:s.O.o=r}return n.bindBuffer.apply(this,arguments)},i.getVertexAttrib=function(t,r){var h=s.O,e=h.u[t];switch(r){case i.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return e.buffer;case i.VERTEX_ATTRIB_ARRAY_ENABLED:return e.enabled;case i.VERTEX_ATTRIB_ARRAY_SIZE:return e.size;case i.VERTEX_ATTRIB_ARRAY_STRIDE:return e._;case i.VERTEX_ATTRIB_ARRAY_TYPE:return e.type;case i.VERTEX_ATTRIB_ARRAY_NORMALIZED:return e.M;default:return n.getVertexAttrib.apply(this,arguments)}},i.vertexAttribPointer=function(t,i,r,h,e,o){var a=s.O;a.m=Math.max(a.m,t);var u=a.u[t];return u.buffer=s.S,u.size=i,u.type=r,u.M=h,u._=e,u.offset=o,u.p(),n.vertexAttribPointer.apply(this,arguments)},i.F&&i.F(this,"OES_vertex_array_object"),i.canvas.addEventListener("webglcontextrestored",function(){var t;t="OESVertexArrayObject emulation library context restored",window.console&&window.console.log&&window.console.log(t),s.V()},!0),this.V()};n.prototype.VERTEX_ARRAY_BINDING_OES=34229,n.prototype.V=function(){if(void 0!==this.N)for(var t=0;t<this.N.length;++t)this.N.s=!1;var i=this.t;this.v=i.getParameter(i.MAX_VERTEX_ATTRIBS),this.j=new s(this),this.O=null,this.S=null,this.N=[this.j],this.bindVertexArrayOES(null)},n.prototype.createVertexArrayOES=function(){var t=new s(this);return this.N.push(t),t},n.prototype.deleteVertexArrayOES=function(t){t.s=!1,this.N.splice(this.N.indexOf(t),1),this.O==t&&this.bindVertexArrayOES(null)},n.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof s&&t.h&&t.i==this)},n.prototype.bindVertexArrayOES=function(t){var s=this.t;if(!t||t.s){var n=this.A,r=this.O;this.O=t||this.j,this.O.h=!0;var h=this.O;if(r!=h){r&&h.o==r.o||n.bindBuffer.call(s,s.ELEMENT_ARRAY_BUFFER,h.o);for(var e=this.S,o=Math.max(r?r.m:0,h.m),a=0;a<=o;a++){var u=h.u[a],v=r?r.u[a]:null;if(r&&u.enabled==v.enabled||(u.enabled?n.enableVertexAttribArray.call(s,a):n.disableVertexAttribArray.call(s,a)),u.enabled){var c=!1;r&&u.buffer==v.buffer||(e!=u.buffer&&(n.bindBuffer.call(s,s.ARRAY_BUFFER,u.buffer),e=u.buffer),c=!0),(c||u.g!=v.g)&&n.vertexAttribPointer.call(s,a,u.size,u.type,u.M,u._,u.offset)}}this.S!=e&&n.bindBuffer.call(s,s.ARRAY_BUFFER,this.S)}}else i(s.INVALID_OPERATION,"bindVertexArrayOES: attempt to bind deleted arrayObject")},function(){var t=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getSupportedExtensions=function(){var i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};var i=WebGLRenderingContext.prototype.getExtension;WebGLRenderingContext.prototype.getExtension=function(t){var s=i.call(this,t);return s||("OES_vertex_array_object"!==t?null:(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new n(this)),this.__OESVertexArrayObject))}}()}()},function(t,i,s){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])}return i})},,function(t,i,s){"use strict";s.r(i);s(1),s(2);function n(t){return-(Math.pow(t-1,2)-1)}var r=function(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+(i-t)*(2/3-s)*6:t},h=function(t,i,s){var n,h,e;if(t/=360,0==i)n=h=e=s;else{var o=s<.5?s*(1+i):s+i-s*i,a=2*s-o;n=r(a,o,t+1/3),h=r(a,o,t),e=r(a,o,t-1/3)}return[n,h,e]};function e(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t}function o(t,i,s){return t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function a(t,i,s){return t[0]=i[0]-s[0],t[1]=i[1]-s[1],t[2]=i[2]-s[2],t}function u(t,i,s){return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t}function v(t,i){var s=i[0],n=i[1],r=i[2],h=s*s+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i[0]*h,t[1]=i[1]*h,t[2]=i[2]*h,t}function c(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}var f,d;f=[0,0,0],d=[0,0,0];function l(t,i){for(var s=0;s<i.length;s++){var n=i[s];n.k=n.k||!1,n.G=!0,"value"in n&&(n.X=!0),Object.defineProperty(t,n.key,n)}}var w=function(){function t(t,i,s){void 0===t&&(t=0),void 0===i&&(i=t),void 0===s&&(s=t),this.C=[t,i,s]}var i,s,n,r=t.prototype;return r.set=function(t,i,s){return void 0===i&&(i=t),void 0===s&&(s=t),t.length?this.L(t):(function(t,i,s,n){t[0]=i,t[1]=s,t[2]=n}(this.C,t,i,s),this)},r.L=function(t){return e(this.C,t.C),this},r.add=function(t,i){return i?o(this.C,t.C,i.C):o(this.C,this.C,t.C),this},r.sub=function(t,i){return i?a(this.C,t.C,i.C):a(this.C,this.C,t.C),this},r.multiply=function(t){var i,s,n;return t.length?(i=this.C,s=this.C,n=t,i[0]=s[0]*n[0],i[1]=s[1]*n[1],i[2]=s[2]*n[2]):u(this.C,this.C,t),this},r.R=function(t){var i,s,n;return t.length?(i=this.C,s=this.C,n=t,i[0]=s[0]/n[0],i[1]=s[1]/n[1],i[2]=s[2]/n[2]):u(this.C,this.C,1/t),this},r.Y=function(t){return t?(i=this.C,s=t.C,n=s[0]-i[0],r=s[1]-i[1],h=s[2]-i[2],Math.sqrt(n*n+r*r+h*h)):function(t){var i=t[0],s=t[1],n=t[2];return Math.sqrt(i*i+s*s+n*n)}(this.C);var i,s,n,r,h},r.Z=function(t){return t?(i=this.C,s=t.C,n=s[0]-i[0],r=s[1]-i[1],h=s[2]-i[2],n*n+r*r+h*h):function(t){var i=t[0],s=t[1],n=t[2];return i*i+s*s+n*n}(this.C);var i,s,n,r,h},r.D=function(t){return c(this.C,t.C)},r.P=function(t){var i,s,n,r,h,e,o;return i=this.C,s=this.C,n=t.C,r=s[0],h=s[1],e=s[2],o=(o=n[3]*r+n[7]*h+n[11]*e+n[15])||1,i[0]=(n[0]*r+n[4]*h+n[8]*e+n[12])/o,i[1]=(n[1]*r+n[5]*h+n[9]*e+n[13])/o,i[2]=(n[2]*r+n[6]*h+n[10]*e+n[14])/o,this},r.U=function(t,i){return void 0===i&&(i=0),this.C[0]=t[i],this.C[1]=t[i+1],this.C[2]=t[i+2],this},i=t,(s=[{key:"x",get:function(){return this.C[0]},set:function(t){this.C[0]=t}},{key:"y",get:function(){return this.C[1]},set:function(t){this.C[1]=t}},{key:"z",get:function(){return this.C[2]},set:function(t){this.C[2]=t}}])&&l(i.prototype,s),n&&l(i,n),t}(),m=new w,p=0,b=0,y=function(){function t(t,i){for(var s in void 0===i&&(i={}),this.t=t,this.attributes=i,this.id=p++,this.I={},this.B={start:0,count:0},this.W=0,this.t.q.T(null),this.t.q.H=null,this.J=this.t.q.state,i)this.K(s,i[s])}var i=t.prototype;return i.K=function(t,i){if(this.attributes[t]=i,i.id=b++,i.size=i.size||1,i.type=i.type||(i.data.constructor===Float32Array?this.t.FLOAT:i.data.constructor===Uint16Array?this.t.UNSIGNED_SHORT:this.t.UNSIGNED_INT),i.target="index"===t?this.t.ELEMENT_ARRAY_BUFFER:this.t.ARRAY_BUFFER,i.normalize=i.normalize||!1,i.buffer=this.t.createBuffer(),i.count=i.data.length/i.size,i.divisor=i.$||0,i.tt=!1,this.it(i),i.divisor){if(this.st=!0,this.W&&this.W!==i.count*i.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.W=Math.min(this.W,i.count*i.divisor);this.W=i.count*i.divisor}else"index"===t?this.B.count=i.count:this.attributes.index||(this.B.count=Math.max(this.B.count,i.count))},i.it=function(t){this.J.nt!==t.id&&(this.t.bindBuffer(t.target,t.buffer),this.J.nt=t.id),this.t.bufferData(t.target,t.data,this.t.STATIC_DRAW),t.tt=!1},i.rt=function(t){this.I[t.ht]=this.t.q.et(),this.t.q.T(this.I[t.ht]),this.ot(t)},i.ot=function(t){var i=this;t.at.forEach(function(t,s){if(i.attributes[s]){var n=i.attributes[s];i.t.bindBuffer(n.target,n.buffer),i.J.nt=n.id,i.t.vertexAttribPointer(t,n.size,n.type,n.normalize,0,0),i.t.enableVertexAttribArray(t),i.t.q.ut(t,n.divisor)}else console.warn("active attribute "+s+" not being supplied")}),this.attributes.index&&this.t.bindBuffer(this.t.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)},i.draw=function(t){var i=this,s=t.vt,n=t.mode,r=void 0===n?this.t.TRIANGLES:n;this.t.q.H!==this.id+"_"+s.ht&&(this.I[s.ht]||this.rt(s),this.t.q.T(this.I[s.ht]),this.t.q.H=this.id+"_"+s.ht),s.at.forEach(function(t,s){var n=i.attributes[s];n.tt&&i.it(n)}),this.st?this.attributes.index?this.t.q.ct(r,this.B.count,this.attributes.index.type,this.B.start,this.W):this.t.q.ft(r,this.B.start,this.B.count,this.W):this.attributes.index?this.t.drawElements(r,this.B.count,this.attributes.index.type,this.B.start):this.t.drawArrays(r,this.B.start,this.B.count)},i.dt=function(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||(this.bounds={min:new w,max:new w,lt:new w,scale:new w,wt:1/0});var i=this.bounds.min,s=this.bounds.max,n=this.bounds.lt,r=this.bounds.scale;i.set(1/0),s.set(-1/0);for(var h=0,e=t.length;h<e;h+=3){var o=t[h],a=t[h+1],u=t[h+2];i.x=Math.min(o,i.x),i.y=Math.min(a,i.y),i.z=Math.min(u,i.z),s.x=Math.max(o,s.x),s.y=Math.max(a,s.y),s.z=Math.max(u,s.z)}r.sub(s,i),n.add(i,s).R(2)},i.pt=function(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||this.dt(t);for(var i=0,s=0,n=t.length;s<n;s+=3)m.U(t,s),i=Math.max(i,this.bounds.lt.Z(m));this.bounds.wt=Math.sqrt(i)},i.remove=function(){for(var t in this.bt&&this.t.q.yt(this.bt),this.attributes)this.t.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]},t}(),x=0,M={},_=function(){function t(t,i){var s=void 0===i?{}:i,n=s.xt,r=s.Mt,h=s._t,e=void 0===h?{}:h,o=s.gt,a=void 0!==o&&o,u=s.cullFace,v=void 0===u?t.BACK:u,c=s.frontFace,f=void 0===c?t.CCW:c,d=s.At,l=void 0===d||d,w=s.Ot,m=void 0===w||w,p=s.depthFunc,b=void 0===p?t.LESS:p;this.t=t,this._t=e,this.id=x++,n||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.gt=a,this.cullFace=v,this.frontFace=f,this.At=l,this.Ot=m,this.depthFunc=b,this.blendFunc={},this.blendEquation={},this.gt&&!this.blendFunc.src&&(this.t.q.Et?this.jt(this.t.ONE,this.t.ONE_MINUS_SRC_ALPHA):this.jt(this.t.SRC_ALPHA,this.t.ONE_MINUS_SRC_ALPHA));var y=t.createShader(t.VERTEX_SHADER);t.shaderSource(y,n),t.compileShader(y),""!==t.getShaderInfoLog(y)&&console.warn(t.getShaderInfoLog(y)+"\nVertex Shader\n"+A(n));var M=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(M,r),t.compileShader(M),""!==t.getShaderInfoLog(M)&&console.warn(t.getShaderInfoLog(M)+"\nFragment Shader\n"+A(r)),this.vt=t.createProgram(),t.attachShader(this.vt,y),t.attachShader(this.vt,M),t.linkProgram(this.vt),!t.getProgramParameter(this.vt,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.vt));t.deleteShader(y),t.deleteShader(M),this.St=new Map;for(var _=t.getProgramParameter(this.vt,t.ACTIVE_UNIFORMS),g=0;g<_;g++){var O=t.getActiveUniform(this.vt,g);this.St.set(O,t.getUniformLocation(this.vt,O.name));var E=O.name.match(/(\w+)/g);O.Ft=E[0],3===E.length?(O.zt=!0,O.Vt=Number(E[1]),O.Nt=E[2]):2===E.length&&isNaN(Number(E[1]))&&(O.kt=!0,O.Nt=E[1])}this.at=new Map;for(var j=[],S=t.getProgramParameter(this.vt,t.ACTIVE_ATTRIBUTES),F=0;F<S;F++){var z=t.getActiveAttrib(this.vt,F),V=t.getAttribLocation(this.vt,z.name);j[V]=z.name,this.at.set(z.name,V)}this.ht=j.join("")}var i=t.prototype;return i.Gt=function(){this.At?this.t.q.enable(this.t.DEPTH_TEST):this.t.q.disable(this.t.DEPTH_TEST),this.cullFace?this.t.q.enable(this.t.CULL_FACE):this.t.q.disable(this.t.CULL_FACE),this.blendFunc.src?this.t.q.enable(this.t.BLEND):this.t.q.disable(this.t.BLEND),this.cullFace&&this.t.q.Xt(this.cullFace),this.t.q.Ct(this.frontFace),this.t.q.Lt(this.Ot),this.t.q.Rt(this.depthFunc),this.blendFunc.src&&this.t.q.jt(this.blendFunc.src,this.blendFunc.Yt,this.blendFunc.Zt,this.blendFunc.Dt),this.blendEquation.Pt&&this.t.q.Ut(this.blendEquation.Pt,this.blendEquation.It)},i.Bt=function(t){var i=this,s=(void 0===t?{}:t).Wt,n=void 0!==s&&s,r=-1;this.t.q.Tt===this.id||(this.t.useProgram(this.vt),this.t.q.Tt=this.id),this.St.forEach(function(t,s){var n=s.Ft,h=i._t[n];if(s.kt&&(h=h[s.Nt],n+="."+s.Nt),s.zt&&(h=h[s.Vt][s.Nt],n+="["+s.Vt+"]."+s.Nt),!h)return E("Active uniform "+n+" has not been supplied");if(h&&void 0===h.value)return E(n+" uniform is missing a value parameter");if(h.value.qt)return r+=1,h.value.update(r),g(i.t,s.type,t,r);if(h.value.C.length&&h.value.C[0].qt){var e=[];return h.value.forEach(function(t){r+=1,t.update(r),e.push(r)}),g(i.t,s.type,t,e)}g(i.t,s.type,t,h.value)}),this.Gt(),n&&this.t.q.Ct(this.frontFace===this.t.CCW?this.t.CW:this.t.CCW)},i.remove=function(){this.t.deleteProgram(this.vt)},t}();function g(t,i,s,n){var r=n.C.length?function(t){var i=t.length,s=t[0].length;if(void 0===s)return t;var n=i*s,r=M[n];r||(M[n]=r=new Float32Array(n));for(var h=0;h<i;h++)r.set(t[h],h*s);return r}(n.C):n.C,h=t.q.state.St.get(s);if(r.length)if(void 0===h)t.q.state.St.set(s,r.slice(0));else{if(function(t,i){if(t.length!==i.length)return!1;for(var s=0,n=t.length;s<n;s++)if(t[s]!==i[s])return!1;return!0}(h,r))return;for(var e=r.length;e--;)h[e]=r[e];t.q.state.St.set(s,h)}else{if(h===n)return;t.q.state.St.set(s,n)}switch(i){case 5126:return r.length?t.uniform1fv(s,r):t.uniform1f(s,r);case 35664:return t.uniform2fv(s,r);case 35665:return t.uniform3fv(s,r);case 35666:return t.uniform4fv(s,r);case 35670:case 5124:case 35678:case 35680:return r.length?t.uniform1iv(s,r):t.uniform1i(s,r);case 35671:case 35667:return t.uniform2iv(s,r);case 35672:case 35668:return t.uniform3iv(s,r);case 35673:case 35669:return t.uniform4iv(s,r);case 35674:return t.uniformMatrix2fv(s,!1,r);case 35675:return t.uniformMatrix3fv(s,!1,r);case 35676:return t.uniformMatrix4fv(s,!1,r)}}function A(t){for(var i=t.split("\n"),s=0;s<i.length;s++)i[s]=s+1+": "+i[s];return i.join("\n")}var O=0;function E(t){O>100||(console.warn(t),++O>100&&console.warn("More than 100 program warnings - stopping logs."))}var j=new w,S=function(){function t(t){var i=void 0===t?{}:t,s=i.canvas,n=void 0===s?document.createElement("canvas"):s,r=i.width,h=void 0===r?300:r,e=i.height,o=void 0===e?150:e,a=i.Ht,u=void 0===a?1:a,v=i.alpha,c=void 0!==v&&v,f=i.Jt,d=void 0===f||f,l=i.Kt,w=void 0!==l&&l,m=i.Qt,p=void 0!==m&&m,b=i.Et,y=void 0!==b&&b,x=i.$t,M=void 0!==x&&x,_=i.ti,g=void 0===_?"default":_,A=i.ii,O=void 0===A||A,E=i.si,j=void 0===E?2:E,S={alpha:c,Jt:d,Kt:w,Qt:p,Et:y,$t:M,ti:g};this.Ht=u,this.alpha=c,this.color=!0,this.Jt=d,this.Kt=w,this.Et=y,this.ii=O,2===j&&(this.t=n.getContext("webgl2",S)),this.ni=!!this.t,this.t||(this.t=n.getContext("webgl",S)||n.getContext("experimental-webgl",S)),this.t.q=this,this.ri(h,o),this.hi={},this.hi.ei=this.t.getParameter(this.t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.state={},this.state.blendFunc={src:this.t.ONE,Yt:this.t.ZERO},this.state.blendEquation={Pt:this.t.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.t.CCW,this.state.depthMask=!0,this.state.depthFunc=this.t.LESS,this.state.oi=!1,this.state.flipY=!1,this.state.ai=4,this.state.ui=null,this.state.viewport={width:null,height:null},this.state.vi=[],this.state.ci=0,this.state.nt=null,this.state.St=new Map,this.extensions={},this.ni?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture")),this.ut=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.ft=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.ct=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.et=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.T=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.yt=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES")}var i=t.prototype;return i.ri=function(t,i){this.width=t,this.height=i,this.t.canvas.width=t*this.Ht,this.t.canvas.height=i*this.Ht,this.t.canvas.style.width=t+"px",this.t.canvas.style.height=i+"px"},i.fi=function(t,i){this.state.viewport.width===t&&this.state.viewport.height===i||(this.state.viewport.width=t,this.state.viewport.height=i,this.t.viewport(0,0,t,i))},i.enable=function(t){!0!==this.state[t]&&(this.t.enable(t),this.state[t]=!0)},i.disable=function(t){!1!==this.state[t]&&(this.t.disable(t),this.state[t]=!1)},i.Xt=function(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.t.cullFace(t))},i.Ct=function(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.t.frontFace(t))},i.Lt=function(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.t.depthMask(t))},i.Rt=function(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.t.depthFunc(t))},i.bindFramebuffer=function(t){var i=void 0===t?{}:t,s=i.target,n=void 0===s?this.t.FRAMEBUFFER:s,r=i.buffer,h=void 0===r?null:r;this.state.ui!==h&&(this.state.ui=h,this.t.bindFramebuffer(n,h))},i.getExtension=function(t,i,s){return i&&this.t[i]?this.t[i].bind(this.t):(this.extensions[t]||(this.extensions[t]=this.t.getExtension(t)),i?this.extensions[t][s].bind(this.extensions[t]):this.extensions[t])},i.di=function(t,i){return t.li!==i.li?t.li-i.li:t.vt.id!==i.vt.id?t.vt.id-i.vt.id:t.wi!==i.wi?t.wi-i.wi:i.id-t.id},i.mi=function(t){var i=t.pi,s=t.bi,n=t.yi,r=t.sort,h=[];if(s&&n&&s.xi(),i.Mi(function(t){if(!t.visible)return!0;t.draw&&(n&&t._i&&s&&!s.gi(t)||h.push(t))}),r){var e=[],o=[],a=[];h.forEach(function(t){t.vt.gt?t.vt.At?o.push(t):a.push(t):e.push(t),t.wi=0,0===t.li&&t.vt.At&&s&&(t.Oi.Ai(j),j.P(s.Ei),t.wi=j.z)}),e.sort(this.di),o.sort(this.ji),a.sort(this.Si),h=e.concat(o,a)}return h},i.Fi=function(t){var i=t.pi,s=t.bi,n=t.target,r=void 0===n?null:n,h=t.update,e=void 0===h||h,o=t.sort,a=void 0===o||o,u=t.yi,v=void 0===u||u,c=t.clear;null===r?(this.bindFramebuffer(),this.fi(this.width*this.Ht,this.height*this.Ht)):(this.bindFramebuffer(r),this.fi(r.width,r.height)),(c||this.ii&&!1!==c)&&(!this.Jt||r&&r.Jt||(this.enable(this.t.DEPTH_TEST),this.Lt(!0)),this.t.clear((this.color?this.t.COLOR_BUFFER_BIT:0)|(this.Jt?this.t.DEPTH_BUFFER_BIT:0)|(this.Kt?this.t.STENCIL_BUFFER_BIT:0))),e&&i.zi(),s&&null===s.parent&&s.zi(),this.mi({pi:i,bi:s,yi:v,sort:a}).forEach(function(t){t.draw({bi:s})})},t}();var F,z=function(t,i){var s=i[0],n=i[1],r=i[2],h=i[3],e=s*s+n*n+r*r+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s*e,t[1]=n*e,t[2]=r*e,t[3]=h*e,t},V=(F=[1,0,0,0,1,0,0,0,1],function(){function t(t,i,s,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=1),this.C=[t,i,s,n],this.Vi=function(){}}return t.prototype.Ni=function(t){return function(t,i,s){void 0===s&&(s="YXZ");var n=Math.sin(.5*i[0]),r=Math.cos(.5*i[0]),h=Math.sin(.5*i[1]),e=Math.cos(.5*i[1]),o=Math.sin(.5*i[2]),a=Math.cos(.5*i[2]);"XYZ"===s?(t[0]=n*e*a+r*h*o,t[1]=r*h*a-n*e*o,t[2]=r*e*o+n*h*a,t[3]=r*e*a-n*h*o):"YXZ"===s?(t[0]=n*e*a+r*h*o,t[1]=r*h*a-n*e*o,t[2]=r*e*o-n*h*a,t[3]=r*e*a+n*h*o):"ZXY"===s?(t[0]=n*e*a-r*h*o,t[1]=r*h*a+n*e*o,t[2]=r*e*o+n*h*a,t[3]=r*e*a-n*h*o):"ZYX"===s?(t[0]=n*e*a-r*h*o,t[1]=r*h*a+n*e*o,t[2]=r*e*o-n*h*a,t[3]=r*e*a+n*h*o):"YZX"===s?(t[0]=n*e*a+r*h*o,t[1]=r*h*a+n*e*o,t[2]=r*e*o-n*h*a,t[3]=r*e*a-n*h*o):"XZY"===s&&(t[0]=n*e*a-r*h*o,t[1]=r*h*a-n*e*o,t[2]=r*e*o+n*h*a,t[3]=r*e*a+n*h*o)}(this.C,t.C,t.order),this},t}());function N(t,i,s){var n=i[0],r=i[1],h=i[2],e=i[3],o=i[4],a=i[5],u=i[6],v=i[7],c=i[8],f=i[9],d=i[10],l=i[11],w=i[12],m=i[13],p=i[14],b=i[15],y=s[0],x=s[1],M=s[2],_=s[3];return t[0]=y*n+x*o+M*c+_*w,t[1]=y*r+x*a+M*f+_*m,t[2]=y*h+x*u+M*d+_*p,t[3]=y*e+x*v+M*l+_*b,y=s[4],x=s[5],M=s[6],_=s[7],t[4]=y*n+x*o+M*c+_*w,t[5]=y*r+x*a+M*f+_*m,t[6]=y*h+x*u+M*d+_*p,t[7]=y*e+x*v+M*l+_*b,y=s[8],x=s[9],M=s[10],_=s[11],t[8]=y*n+x*o+M*c+_*w,t[9]=y*r+x*a+M*f+_*m,t[10]=y*h+x*u+M*d+_*p,t[11]=y*e+x*v+M*l+_*b,y=s[12],x=s[13],M=s[14],_=s[15],t[12]=y*n+x*o+M*c+_*w,t[13]=y*r+x*a+M*f+_*m,t[14]=y*h+x*u+M*d+_*p,t[15]=y*e+x*v+M*l+_*b,t}var k=function(){function t(t,i,s,n,r,h,e,o,a,u,v,c,f,d,l,w){void 0===t&&(t=1),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===h&&(h=1),void 0===e&&(e=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===v&&(v=1),void 0===c&&(c=0),void 0===f&&(f=0),void 0===d&&(d=0),void 0===l&&(l=0),void 0===w&&(w=1),this.C=[t,i,s,n,r,h,e,o,a,u,v,c,f,d,l,w]}var i=t.prototype;return i.multiply=function(t,i){return i?N(this.C,t.C,i.C):N(this.C,this.C,t.C),this},i.L=function(t){var i,s;return i=this.C,s=t.C,i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],this},i.ki=function(t){var i=void 0===t?{}:t,s=i.Gi,n=i.Xi,r=i.near,h=i.Ci;return function(t,i,s,n,r){var h=1/Math.tan(i/2),e=1/(n-r);t[0]=h/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*e,t[15]=0}(this.C,s,n,r,h),this},i.Li=function(t){return function(t,i){var s=i[0],n=i[1],r=i[2],h=i[3],e=s+s,o=n+n,a=r+r,u=s*e,v=n*e,c=n*o,f=r*e,d=r*o,l=r*a,w=h*e,m=h*o,p=h*a;t[0]=1-c-l,t[1]=v+p,t[2]=f-m,t[3]=0,t[4]=v-p,t[5]=1-u-l,t[6]=d+w,t[7]=0,t[8]=f+m,t[9]=d-w,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this.C,t.C),this},i.inverse=function(t){var i,s,n,r,h,e,o,a,u,v,c,f,d,l,w,m,p,b,y,x,M,_,g,A,O,E,j,S,F,z,V;return void 0===t&&(t=this),i=this.C,s=t.C,n=s[0],r=s[1],h=s[2],e=s[3],o=s[4],a=s[5],u=s[6],v=s[7],c=s[8],f=s[9],d=s[10],l=s[11],w=s[12],m=s[13],p=s[14],b=s[15],(V=(y=n*a-r*o)*(z=d*b-l*p)-(x=n*u-h*o)*(F=f*b-l*m)+(M=n*v-e*o)*(S=f*p-d*m)+(_=r*u-h*a)*(j=c*b-l*w)-(g=r*v-e*a)*(E=c*p-d*w)+(A=h*v-e*u)*(O=c*m-f*w))&&(V=1/V,i[0]=(a*z-u*F+v*S)*V,i[1]=(h*F-r*z-e*S)*V,i[2]=(m*A-p*g+b*_)*V,i[3]=(d*g-f*A-l*_)*V,i[4]=(u*j-o*z-v*E)*V,i[5]=(n*z-h*j+e*E)*V,i[6]=(p*M-w*A-b*x)*V,i[7]=(c*A-d*M+l*x)*V,i[8]=(o*F-a*j+v*O)*V,i[9]=(r*j-n*F-e*O)*V,i[10]=(w*g-m*M+b*y)*V,i[11]=(f*M-c*g-l*y)*V,i[12]=(a*E-o*S-u*O)*V,i[13]=(n*S-r*E+h*O)*V,i[14]=(m*x-w*_-p*y)*V,i[15]=(c*_-f*x+d*y)*V),this},i.Ri=function(t,i,s){return function(t,i,s,n){var r=i[0],h=i[1],e=i[2],o=i[3],a=r+r,u=h+h,v=e+e,c=r*a,f=r*u,d=r*v,l=h*u,w=h*v,m=e*v,p=o*a,b=o*u,y=o*v,x=n[0],M=n[1],_=n[2];t[0]=(1-(l+m))*x,t[1]=(f+y)*x,t[2]=(d-b)*x,t[3]=0,t[4]=(f-y)*M,t[5]=(1-(c+m))*M,t[6]=(w+p)*M,t[7]=0,t[8]=(d+b)*_,t[9]=(w-p)*_,t[10]=(1-(c+l))*_,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1}(this.C,t.C,i.C,s.C),this},i.Yi=function(t){var i,s,n,r;return i=t.C,s=this.C,n=s[0]+s[5]+s[10],r=0,n>0?(r=2*Math.sqrt(n+1),i[3]=.25*r,i[0]=(s[6]-s[9])/r,i[1]=(s[8]-s[2])/r,i[2]=(s[1]-s[4])/r):s[0]>s[5]&&s[0]>s[10]?(r=2*Math.sqrt(1+s[0]-s[5]-s[10]),i[3]=(s[6]-s[9])/r,i[0]=.25*r,i[1]=(s[1]+s[4])/r,i[2]=(s[8]+s[2])/r):s[5]>s[10]?(r=2*Math.sqrt(1+s[5]-s[0]-s[10]),i[3]=(s[8]-s[2])/r,i[0]=(s[1]+s[4])/r,i[1]=.25*r,i[2]=(s[6]+s[9])/r):(r=2*Math.sqrt(1+s[10]-s[0]-s[5]),i[3]=(s[1]-s[4])/r,i[0]=(s[8]+s[2])/r,i[1]=(s[6]+s[9])/r,i[2]=.25*r),this},i.Ai=function(t){var i,s;return i=t.C,s=this.C,i[0]=s[12],i[1]=s[13],i[2]=s[14],this},i.Zi=function(){return t=this.C,i=t[0],s=t[1],n=t[2],r=t[4],h=t[5],e=t[6],o=t[8],a=t[9],u=t[10],v=i*i+s*s+n*n,c=r*r+h*h+e*e,f=o*o+a*a+u*u,Math.sqrt(Math.max(v,c,f));var t,i,s,n,r,h,e,o,a,u,v,c,f},i.Di=function(t,i,s){return function(t,i,s,n){var r=i[0],h=i[1],e=i[2],o=n[0],a=n[1],u=n[2],v=r-s[0],c=h-s[1],f=e-s[2],d=v*v+c*c+f*f;d>0&&(v*=d=1/Math.sqrt(d),c*=d,f*=d);var l=a*f-u*c,w=u*v-o*f,m=o*c-a*v;(d=l*l+w*w+m*m)>0&&(l*=d=1/Math.sqrt(d),w*=d,m*=d),t[0]=l,t[1]=w,t[2]=m,t[3]=0,t[4]=c*m-f*w,t[5]=f*l-v*m,t[6]=v*w-c*l,t[7]=0,t[8]=v,t[9]=c,t[10]=f,t[11]=0,t[12]=r,t[13]=h,t[14]=e,t[15]=1}(this.C,t.C,i,s.C),this},i.Pi=function(){return t=this.C,i=t[0],s=t[1],n=t[2],r=t[3],h=t[4],e=t[5],o=t[6],a=t[7],u=t[8],v=t[9],c=t[10],f=t[11],d=t[12],l=t[13],w=t[14],m=t[15],(i*e-s*h)*(c*m-f*w)-(i*o-n*h)*(v*m-f*l)+(i*a-r*h)*(v*w-c*l)+(s*o-n*e)*(u*m-f*d)-(s*a-r*e)*(u*w-c*d)+(n*a-r*o)*(u*l-v*d);var t,i,s,n,r,h,e,o,a,u,v,c,f,d,l,w,m},t}();function G(t,i){for(var s=0;s<i.length;s++){var n=i[s];n.k=n.k||!1,n.G=!0,"value"in n&&(n.X=!0),Object.defineProperty(t,n.key,n)}}var X=new k,C=function(){function t(t,i,s,n){void 0===t&&(t=0),void 0===i&&(i=t),void 0===s&&(s=t),void 0===n&&(n="YXZ"),this.C=[t,i,s],this.order=n,this.Vi=function(){}}var i,s,n,r=t.prototype;return r.Ui=function(t,i){return void 0===i&&(i=this.order),function(t,i,s){void 0===s&&(s="YXZ"),"XYZ"===s?(t[1]=Math.asin(Math.min(Math.max(i[8],-1),1)),Math.abs(i[8])<.99999?(t[0]=Math.atan2(-i[9],i[10]),t[2]=Math.atan2(-i[4],i[0])):(t[0]=Math.atan2(i[6],i[5]),t[2]=0)):"YXZ"===s&&(t[0]=Math.asin(-Math.min(Math.max(i[9],-1),1)),Math.abs(i[9])<.99999?(t[1]=Math.atan2(i[8],i[10]),t[2]=Math.atan2(i[1],i[5])):(t[1]=Math.atan2(-i[2],i[0]),t[2]=0))}(this.C,t.C,i),this},r.Li=function(t,i){return void 0===i&&(i=this.order),X.Li(t),this.Ui(X,i)},i=t,(s=[{key:"x",get:function(){return this.C[0]},set:function(t){this.C[0]=t,this.Vi()}},{key:"y",get:function(){return this.C[1]},set:function(t){this.C[1]=t,this.Vi()}},{key:"z",get:function(){return this.C[2]},set:function(t){this.C[2]=t,this.Vi()}}])&&G(i.prototype,s),n&&G(i,n),t}(),L=function(){function t(){var t=this;this.parent=null,this.children=[],this.visible=!0,this.matrix=new k,this.Oi=new k,this.Ii=!0,this.position=new w,this.Bi=new V,this.scale=new w(1),this.rotation=new C,this.Wi=new w(0,1,0),this.rotation.Vi=function(){return t.Bi.Ni(t.rotation)},this.Bi.Vi=function(){return t.rotation.Li(t.Bi)}}var i=t.prototype;return i.Ti=function(t,i){void 0===i&&(i=!0),i&&this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,i&&t&&t.qi(this,!1)},i.qi=function(t,i){void 0===i&&(i=!0),~this.children.indexOf(t)||this.children.push(t),i&&t.Ti(this,!1)},i.zi=function(t){this.Ii&&this.Hi(),(this.Ji||t)&&(null===this.parent?this.Oi.L(this.matrix):this.Oi.multiply(this.parent.Oi,this.matrix),this.Ji=!1,t=!0);for(var i=0,s=this.children.length;i<s;i++)this.children[i].zi(t)},i.Hi=function(){this.matrix.Ri(this.Bi,this.position,this.scale),this.Ji=!0},i.Mi=function(t){if(!t(this))for(var i=0,s=this.children.length;i<s;i++)this.children[i].Mi(t)},i.Di=function(t,i){void 0===i&&(i=!1),i?this.matrix.Di(this.position,t,this.Wi):this.matrix.Di(t,this.position,this.Wi),this.matrix.Yi(this.Bi),this.rotation.Li(this.Bi)},t}();new k;var R=new w,Y=new w,Z=function(t){var i,s;function n(i,s){var n,r=void 0===s?{}:s,h=r.near,e=void 0===h?.1:h,o=r.Ci,a=void 0===o?100:o,u=r.Gi,v=void 0===u?45:u,c=r.Xi,f=void 0===c?1:c,d=r.left,l=r.right,w=r.bottom,m=r.top;return(n=t.call(this,i)||this).near=e,n.Ci=a,n.Gi=v,n.Xi=f,n.projectionMatrix=new k,n.Ki=new k,n.Ei=new k,d||l?n.Qi({left:d,right:l,bottom:w,top:m}):n.perspective(),n}s=t,(i=n).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s;var r=n.prototype;return r.perspective=function(t){var i=void 0===t?{}:t,s=i.near,n=void 0===s?this.near:s,r=i.Ci,h=void 0===r?this.Ci:r,e=i.Gi,o=void 0===e?this.Gi:e,a=i.Xi,u=void 0===a?this.Xi:a;return this.projectionMatrix.ki({Gi:o*(Math.PI/180),Xi:u,near:n,Ci:h}),this.type="perspective",this},r.zi=function(){return t.prototype.zi.call(this),this.Ki.inverse(this.Oi),this.Ei.multiply(this.projectionMatrix,this.Ki),this},r.Di=function(i){return t.prototype.Di.call(this,i,!0),this},r.xi=function(){this.$i||(this.$i=[new w,new w,new w,new w,new w,new w]);var t=this.Ei.C;this.$i[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).ts=t[15]-t[12],this.$i[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).ts=t[15]+t[12],this.$i[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).ts=t[15]+t[13],this.$i[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).ts=t[15]-t[13],this.$i[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).ts=t[15]-t[14],this.$i[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).ts=t[15]+t[14];for(var i=0;i<6;i++){var s=1/this.$i[i].Y();this.$i[i].multiply(s),this.$i[i].ts*=s}},r.gi=function(t){t.ss.bounds&&t.ss.bounds.wt!==1/0||t.ss.pt();var i=R;i.L(t.ss.bounds.lt),i.P(t.Oi);var s=t.ss.bounds.wt*t.Oi.Zi();return this.ns(i,s)},r.ns=function(t,i){for(var s=Y,n=0;n<6;n++){var r=this.$i[n];if(s.L(r).D(t)+r.ts<-i)return!1}return!0},n}(L);var D=function(){function t(t,i,s,n,r,h,e,o,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===h&&(h=0),void 0===e&&(e=0),void 0===o&&(o=0),void 0===a&&(a=1),this.C=[t,i,s,n,r,h,e,o,a]}return t.prototype.rs=function(t){var i,s,n,r,h,e,o,a,u,v,c,f,d,l,w,m,p,b,y,x,M,_,g,A,O,E,j,S,F,z,V;return i=this.C,s=t.C,n=s[0],r=s[1],h=s[2],e=s[3],o=s[4],a=s[5],u=s[6],v=s[7],c=s[8],f=s[9],d=s[10],l=s[11],w=s[12],m=s[13],p=s[14],b=s[15],(V=(y=n*a-r*o)*(z=d*b-l*p)-(x=n*u-h*o)*(F=f*b-l*m)+(M=n*v-e*o)*(S=f*p-d*m)+(_=r*u-h*a)*(j=c*b-l*w)-(g=r*v-e*a)*(E=c*p-d*w)+(A=h*v-e*u)*(O=c*m-f*w))&&(V=1/V,i[0]=(a*z-u*F+v*S)*V,i[1]=(u*j-o*z-v*E)*V,i[2]=(o*F-a*j+v*O)*V,i[3]=(h*F-r*z-e*S)*V,i[4]=(n*z-h*j+e*E)*V,i[5]=(r*j-n*F-e*O)*V,i[6]=(m*A-p*g+b*_)*V,i[7]=(p*M-w*A-b*x)*V,i[8]=(w*g-m*M+b*y)*V),this},t}();var P=0,U=function(t){var i,s;function n(i,s){var n,r=void 0===s?{}:s,h=r.ss,e=r.vt,o=r.mode,a=void 0===o?i.TRIANGLES:o,u=r._i,v=void 0===u||u,c=r.li,f=void 0===c?0:c;return(n=t.call(this,i)||this).t=i,n.id=P++,n.ss=h,n.vt=e,n.mode=a,n._i=v,n.li=f,n.modelViewMatrix=new k,n.normalMatrix=new D,n.vt._t.hs||Object.assign(n.vt._t,{hs:{value:null},Ki:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},es:{value:null}}),n}return s=t,(i=n).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,n.prototype.draw=function(t){var i=(void 0===t?{}:t).bi;this.os&&this.os({as:this,bi:i}),i&&(this.vt._t.projectionMatrix.value=i.projectionMatrix,this.vt._t.es.value=i.position,this.vt._t.Ki.value=i.Ki,this.modelViewMatrix.multiply(i.Ki,this.Oi),this.normalMatrix.rs(this.modelViewMatrix),this.vt._t.hs.value=this.Oi,this.vt._t.modelViewMatrix.value=this.modelViewMatrix,this.vt._t.normalMatrix.value=this.normalMatrix);var s=this.vt.cullFace&&this.Oi.Pi().C<0;this.vt.Bt({Wt:s}),this.ss.draw({mode:this.mode,vt:this.vt}),this.us&&this.us({as:this,bi:i})},n}(L);var I=function(t){var i,s;function n(i,s){var r=void 0===s?{}:s,h=r.width,e=void 0===h?1:h,o=r.height,a=void 0===o?1:o,u=r.attributes,v=void 0===u?{}:u,c=r.vs,f=void 0===c?null:c;if(!f)throw new Error("need positions");var d=4*f.length,l=6*f.length,w=new Float32Array(3*d),m=new Float32Array(3*d),p=new Float32Array(2*d),b=d>65536?new Uint32Array(l):new Uint16Array(l),y=0,x=0,M=f,_=Array.isArray(M),g=0;for(M=_?M:M[Symbol.iterator]();;){var A;if(_){if(g>=M.length)break;A=M[g++]}else{if((g=M.next()).done)break;A=g.value}var O=A;n.cs.apply(n,[w,m,p,b,e,a,0,2,1,y,x].concat(O)),y+=4,x+=1}return Object.assign(v,{position:{size:3,data:w},normal:{size:3,data:m},fs:{size:2,data:p},index:{data:b}}),t.call(this,i,v)||this}return s=t,(i=n).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,n.cs=function(t,i,s,n,r,h,e,o,a,u,v,c,f,d){void 0===e&&(e=0),void 0===o&&(o=1),void 0===a&&(a=2),void 0===u&&(u=0),void 0===v&&(v=0),void 0===c&&(c=0),void 0===f&&(f=0),void 0===d&&(d=0);for(var l=u,w=0;w<=1;w++)for(var m=w*h-h/2-f,p=0;p<=1;p++,u++){var b=p*r-r/2-c;if(t[3*u+e]=-b,t[3*u+o]=-m,t[3*u+a]=d,i[3*u+e]=0,i[3*u+o]=0,i[3*u+a]=1,s[2*u]=p,s[2*u+1]=1-w,1!==w&&1!==p){var y=l+p+2*w,x=l+p+2*(w+1),M=l+p+2*(w+1)+1,_=l+p+2*w+1;n[6*v]=y,n[6*v+1]=x,n[6*v+2]=_,n[6*v+3]=x,n[6*v+4]=M,n[6*v+5]=_,v++}}},n}(y);var B=function(t){var i,s;function n(i,s){var r=void 0===s?{}:s,h=r.width,e=void 0===h?1:h,o=r.height,a=void 0===o?1:o,u=r.ds,v=void 0===u?1:u,c=r.ls,f=void 0===c?1:c,d=r.attributes,l=void 0===d?{}:d,w=v,m=f,p=(w+1)*(m+1),b=w*m*6,y=new Float32Array(3*p),x=new Float32Array(3*p),M=new Float32Array(2*p),_=p>65536?new Uint32Array(b):new Uint16Array(b);return n.cs(y,x,M,_,e,a,0,w,m),Object.assign(l,{position:{size:3,data:y},normal:{size:3,data:x},fs:{size:2,data:M},index:{data:_}}),t.call(this,i,l)||this}return s=t,(i=n).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,n.cs=function(t,i,s,n,r,h,e,o,a,u,v,c,f,d,l,w){void 0===u&&(u=0),void 0===v&&(v=1),void 0===c&&(c=2),void 0===f&&(f=1),void 0===d&&(d=-1),void 0===l&&(l=0),void 0===w&&(w=0);for(var m=l,p=r/o,b=h/a,y=0;y<=a;y++)for(var x=y*b-h/2,M=0;M<=o;M++,l++){var _=M*p-r/2;if(t[3*l+u]=_*f,t[3*l+v]=x*d,t[3*l+c]=e/2,i[3*l+u]=0,i[3*l+v]=0,i[3*l+c]=e>=0?1:-1,s[2*l]=M/o,s[2*l+1]=1-y/a,y!==a&&M!==o){var g=m+M+y*(o+1),A=m+M+(y+1)*(o+1),O=m+M+(y+1)*(o+1)+1,E=m+M+y*(o+1)+1;n[6*w]=g,n[6*w+1]=A,n[6*w+2]=E,n[6*w+3]=A,n[6*w+4]=O,n[6*w+5]=E,w++}}},n}(y);var W=function(t){var i,s;function n(i,s){var n=void 0===s?{}:s,r=n.width,h=void 0===r?1:r,e=n.height,o=void 0===e?1:e,a=n.Jt,u=void 0===a?1:a,v=n.ds,c=void 0===v?1:v,f=n.ls,d=void 0===f?1:f,l=n.ws,w=void 0===l?1:l,m=n.attributes,p=void 0===m?{}:m,b=c,y=d,x=w,M=(b+1)*(y+1)*2+(b+1)*(x+1)*2+(y+1)*(x+1)*2,_=6*(b*y*2+b*x*2+y*x*2),g=new Float32Array(3*M),A=new Float32Array(3*M),O=new Float32Array(2*M),E=M>65536?new Uint32Array(_):new Uint16Array(_),j=0,S=0;return B.cs(g,A,O,E,u,o,h,x,y,2,1,0,-1,-1,j,S),B.cs(g,A,O,E,u,o,-h,x,y,2,1,0,1,-1,j+=(x+1)*(y+1),S+=x*y),B.cs(g,A,O,E,h,u,o,x,y,0,2,1,1,1,j+=(x+1)*(y+1),S+=x*y),B.cs(g,A,O,E,h,u,-o,x,y,0,2,1,1,-1,j+=(b+1)*(x+1),S+=b*x),B.cs(g,A,O,E,h,o,-u,b,y,0,1,2,-1,-1,j+=(b+1)*(x+1),S+=b*x),B.cs(g,A,O,E,h,o,u,b,y,0,1,2,1,-1,j+=(b+1)*(y+1),S+=b*y),Object.assign(p,{position:{size:3,data:g},normal:{size:3,data:A},fs:{size:2,data:O},index:{data:E}}),t.call(this,i,p)||this}return s=t,(i=n).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,n}(y);function T(t){var i=0,s=0,n=t,r=Array.isArray(n),h=0;for(n=r?n:n[Symbol.iterator]();;){var e;if(r){if(h>=n.length)break;e=n[h++]}else{if((h=n.next()).done)break;e=h.value}var o=e,a=Array.isArray(o),u=0;for(o=a?o:o[Symbol.iterator]();;){var v;if(a){if(u>=o.length)break;v=o[u++]}else{if((u=o.next()).done)break;v=u.value}var c=v;s+=c.count-0;var f=c.count-0;i<f&&(i=f)}}return{ms:i,ps:s}}function q(t,i,s){return(q=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,i,s){var n=[null];n.push.apply(n,i);var r=new(Function.bind.apply(t,n));return s&&H(r,s.prototype),r}).apply(null,arguments)}function H(t,i){return(H=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}
/*! ContributeForest v0.0.3 | Yukimasa Funaoka <yukimasafunaoka@gmail.com> */var J=function(){function t(t){for(var i in this.bs=document.body,this.data=[],this.ys=800,this.xs=350,this.Ms=5.5,this._s=1.8,this.gs=.25,t)this[i]=t[i];this.w=this.ys,this.As=this.xs,this.Os=this.xs/this.ys,this.animate=this.animate.bind(this),this.Es=this.Es.bind(this),this.js=this._s+this.gs,this.Ss=Date.now(),this.ms=T(this.data).ms,this.q=new S({Qt:!0}),this.t=this.q.t,document.getElementById("forest-view").appendChild(this.t.canvas),this.t.clearColor(1,1,1,1),this.Fs=[],this.pi=new L,this.bi=new Z(this.t,{Gi:30,Ci:1e3}),this.bi.position.set(0,0,100),this.bi.Di([0,0,0]),this.zs(),this.Es(),window.addEventListener("resize",this.Es)}var i=t.prototype;return i.Es=function(){this.w=Math.min(window.innerWidth,this.ys),this.As=this.w*this.Os,this.q.Ht=Math.max(window.devicePixelRatio,2),this.q.ri(this.w,this.As),this.bi.perspective({Xi:this.t.canvas.width/this.t.canvas.height}),this.q.Fi({pi:this.pi,bi:this.bi})},i.zs=function(){for(var t=this,i=this.data.length,s=new W(this.t,{width:this._s,Jt:this._s,height:this.Ms}),n=new _(this.t,{xt:"precision highp float;precision highp int;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;void main(){vec4 t;t.xyz=position;t.w=1.0;gl_Position=projectionMatrix*modelViewMatrix*t;}",Mt:"precision highp float;precision highp int;void main(){gl_FragColor.xyz=vec3(0.93333);gl_FragColor.w=1.0;}"}),r=new _(this.t,{xt:"precision highp float;precision highp int;attribute vec3 position;attribute vec3 normal;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat3 normalMatrix;varying vec3 vN;void main(){vN=normalize(normalMatrix*normal);vec4 t;t.w=1.0;t.xyz=position;gl_Position=projectionMatrix*modelViewMatrix*t;}",Mt:"precision highp int;precision highp float;uniform vec3 color;varying vec3 vN;void main(){float t=(max(dot(vN,vec3(0.0,0.5734624,0.8192319)),0.0)*1.07);gl_FragColor.xyz=((((color-1.0)*vec3((0.666+(t/3.0))))+1.0)+(vec3((t-0.82))*0.5));gl_FragColor.w=1.0;}",_t:{color:{value:null}}}),e=[],o=0;o<this.data.length;o++){var a=this.data[o];this.Fs[o]=[];for(var u=0+(o-i/2-2)*this.js,v=function(n){var v=n*t.js,c=a[n].count/t.ms*.2,f=q(w,h(360/i*o,.7,.65-c)),d=new U(t.t,{ss:s,vt:r});d.position.set(u,8.25,v),d.os=function(){r._t.color.value=f},d.Ti(t.pi),t.Fs[o][n]=d,e.push([u,v])},c=0;c<a.length;c++)v(c)}var f=new I(this.t,{width:this._s,height:this._s,vs:e});new U(this.t,{ss:f,vt:n}).Ti(this.pi),this.pi.rotation.x=.32,this.pi.rotation.y=-.64,this.pi.rotation.z=-.22,this.q.Fi({pi:this.pi,bi:this.bi})},i.animate=function(){var t,i=(Date.now()-this.Ss)/16.6666,s=this.Fs.length+20;i<s&&requestAnimationFrame(this.animate);for(var r=0;r<this.Fs.length;r++)for(var h=0;h<this.Fs[r].length;h++){var e=this.Fs[r][h],o=this.data[r][h],a=0;i>=r&&(t=(i-r)/20,a=(t-=1)*t*(2.7*t+1.7)+1,i-r>=20&&(a=1)),a*=(o.count-0)/this.ms*3,e.position.set(e.position.x,this.Ms*a/2,e.position.z),a&&(e.scale.y=a),e.visible=!!a}var u=i/s;this.pi.rotation.x=.32+.18*n(u),this.pi.rotation.y=.2*n(u)-.64,this.q.Fi({pi:this.pi,bi:this.bi})},t}();s.d(i,"draw",function(){return K});var K=function(t){var i=document.getElementById("forest-view");i.className="loaded",new J({data:t,bs:i}).animate(),function(t){var i=document.getElementById("forest-view__contributions__count"),s=T(t).ps,r=t.length+13,h=new Intl.NumberFormat,e=Date.now(),o=0;!function t(){var a=(Date.now()-e)/16.6666;a<r&&(requestAnimationFrame(t),++o%2)||(i.textContent=h.format(s*n(a/r)|0))}()}(t)}}]]);